create or replace function dm.dm_insert_infra() returns void as $$ begin IF NOT EXISTS (SELECT 1 FROM dm.dm_domain WHERE name = 'Infrastructure') THEN insert into dm.dm_domain (id,name,domainid,ownerid,status) (select max(id)+1,'Infrastructure', 1, 1,'N' from dm.dm_domain);END IF;end;$$ LANGUAGE plpgsql;
