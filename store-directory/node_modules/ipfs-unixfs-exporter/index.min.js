(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.IpfsUnixfsExporter = factory()}(typeof self !== 'undefined' ? self : this, function () {
var IpfsUnixfsExporter=(()=>{var ea=Object.create;var Ut=Object.defineProperty;var ta=Object.getOwnPropertyDescriptor;var ra=Object.getOwnPropertyNames;var na=Object.getPrototypeOf,ia=Object.prototype.hasOwnProperty;var Cn=r=>Ut(r,"__esModule",{value:!0});var U=(r,e)=>()=>(r&&(e=r(r=0)),e);var E=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),F=(r,e)=>{Cn(r);for(var t in e)Ut(r,t,{get:e[t],enumerable:!0})},oa=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of ra(e))!ia.call(r,n)&&n!=="default"&&Ut(r,n,{get:()=>e[n],enumerable:!(t=ta(e,n))||t.enumerable});return r},q=r=>oa(Cn(Ut(r!=null?ea(na(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var pe=E((tl,Un)=>{"use strict";function On(r,e){for(let t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function sa(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return On(r,t)}catch(n){t.message=r.message,t.stack=r.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(r)),On(new i,t)}}Un.exports=sa});function Ln(r,e,t){e=e||[],t=t||0;for(var n=t;r>=fa;)e[t++]=r&255|zn,r/=128;for(;r&ua;)e[t++]=r&255|zn,r>>>=7;return e[t]=r|0,Ln.bytes=t-n+1,e}function mr(r,e){var t=0,e=e||0,n=0,i=e,o,s=r.length;do{if(i>=s)throw mr.bytes=0,new RangeError("Could not decode varint");o=r[i++],t+=n<28?(o&In)<<n:(o&In)*Math.pow(2,n),n+=7}while(o>=da);return mr.bytes=i-e,t}var aa,zn,ca,ua,fa,la,da,In,ha,pa,ya,ga,ma,wa,ba,_a,Ta,xa,ka,va,dt,Mn=U(()=>{aa=Ln,zn=128,ca=127,ua=~ca,fa=Math.pow(2,31);la=mr,da=128,In=127;ha=Math.pow(2,7),pa=Math.pow(2,14),ya=Math.pow(2,21),ga=Math.pow(2,28),ma=Math.pow(2,35),wa=Math.pow(2,42),ba=Math.pow(2,49),_a=Math.pow(2,56),Ta=Math.pow(2,63),xa=function(r){return r<ha?1:r<pa?2:r<ya?3:r<ga?4:r<ma?5:r<wa?6:r<ba?7:r<_a?8:r<Ta?9:10},ka={encode:aa,decode:la,encodingLength:xa},va=ka,dt=va});var ht,Je,We,zt=U(()=>{Mn();ht=r=>[dt.decode(r),dt.decode.bytes],Je=(r,e,t=0)=>(dt.encode(r,e,t),e),We=r=>dt.encodingLength(r)});var pt={};F(pt,{coerce:()=>ie,empty:()=>qn,equals:()=>wr,fromHex:()=>Ba,fromString:()=>br,isBinary:()=>Aa,toHex:()=>Ea,toString:()=>_r});var qn,Ea,Ba,wr,ie,Aa,br,_r,ke=U(()=>{qn=new Uint8Array(0),Ea=r=>r.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),""),Ba=r=>{let e=r.match(/../g);return e?new Uint8Array(e.map(t=>parseInt(t,16))):qn},wr=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},ie=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},Aa=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),br=r=>new TextEncoder().encode(r),_r=r=>new TextDecoder().decode(r)});var Ue,Lt,Rn,yt,Xe=U(()=>{ke();zt();Ue=(r,e)=>{let t=e.byteLength,n=We(r),i=n+We(t),o=new Uint8Array(i+t);return Je(r,o,0),Je(t,o,n),o.set(e,i),new yt(r,t,e,o)},Lt=r=>{let e=ie(r),[t,n]=ht(e),[i,o]=ht(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new yt(t,i,s,e)},Rn=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&wr(r.bytes,e.bytes),yt=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}}});function Sa(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),s=o.charCodeAt(0);if(t[s]!==255)throw new TypeError(o+" is ambiguous");t[s]=i}var u=r.length,a=r.charAt(0),f=Math.log(u)/Math.log(256),l=Math.log(256)/Math.log(u);function _(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";for(var p=0,V=0,y=0,g=d.length;y!==g&&d[y]===0;)y++,p++;for(var w=(g-y)*l+1>>>0,b=new Uint8Array(w);y!==g;){for(var v=d[y],A=0,m=w-1;(v!==0||A<V)&&m!==-1;m--,A++)v+=256*b[m]>>>0,b[m]=v%u>>>0,v=v/u>>>0;if(v!==0)throw new Error("Non-zero carry");V=A,y++}for(var j=w-V;j!==w&&b[j]===0;)j++;for(var he=a.repeat(p);j<w;++j)he+=r.charAt(b[j]);return he}function B(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;var p=0;if(d[p]!==" "){for(var V=0,y=0;d[p]===a;)V++,p++;for(var g=(d.length-p)*f+1>>>0,w=new Uint8Array(g);d[p];){var b=t[d.charCodeAt(p)];if(b===255)return;for(var v=0,A=g-1;(b!==0||v<y)&&A!==-1;A--,v++)b+=u*w[A]>>>0,w[A]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");y=v,p++}if(d[p]!==" "){for(var m=g-y;m!==g&&w[m]===0;)m++;for(var j=new Uint8Array(V+(g-m)),he=V;m!==g;)j[he++]=w[m++];return j}}}function c(d){var p=B(d);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:_,decodeUnsafe:B,decode:c}}var Na,Da,Hn,Vn=U(()=>{Na=Sa,Da=Na,Hn=Da});var Gn,Jn,Wn,Xn,Kn,It,ve,ja,Pa,z,oe=U(()=>{Vn();ke();Gn=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Jn=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseDecode=n}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){return Xn(this,e)}},Wn=class{constructor(e){this.decoders=e}or(e){return Xn(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Xn=(r,e)=>new Wn({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),Kn=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new Gn(e,t,n),this.decoder=new Jn(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},It=({name:r,prefix:e,encode:t,decode:n})=>new Kn(r,e,t,n),ve=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=Hn(t,e);return It({prefix:r,name:e,encode:n,decode:o=>ie(i(o))})},ja=(r,e,t,n)=>{let i={};for(let l=0;l<e.length;++l)i[e[l]]=l;let o=r.length;for(;r[o-1]==="=";)--o;let s=new Uint8Array(o*t/8|0),u=0,a=0,f=0;for(let l=0;l<o;++l){let _=i[r[l]];if(_===void 0)throw new SyntaxError(`Non-${n} character`);a=a<<t|_,u+=t,u>=8&&(u-=8,s[f++]=255&a>>u)}if(u>=t||255&a<<8-u)throw new SyntaxError("Unexpected end of data");return s},Pa=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,o="",s=0,u=0;for(let a=0;a<r.length;++a)for(u=u<<8|r[a],s+=8;s>t;)s-=t,o+=e[i&u>>s];if(s&&(o+=e[i&u<<t-s]),n)for(;o.length*t&7;)o+="=";return o},z=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>It({prefix:e,name:r,encode(i){return Pa(i,n,t)},decode(i){return ja(i,n,t,r)}})});var Tr={};F(Tr,{base58btc:()=>se,base58flickr:()=>Ca});var se,Ca,xr=U(()=>{oe();se=ve({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ca=ve({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var kr={};F(kr,{base32:()=>Ke,base32hex:()=>La,base32hexpad:()=>Ma,base32hexpadupper:()=>Fa,base32hexupper:()=>Ia,base32pad:()=>Ua,base32padupper:()=>za,base32upper:()=>Oa,base32z:()=>qa});var Ke,Oa,Ua,za,La,Ia,Ma,Fa,qa,vr=U(()=>{oe();Ke=z({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Oa=z({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ua=z({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),za=z({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),La=z({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ia=z({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Ma=z({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Fa=z({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),qa=z({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var P,Ra,$a,Ha,gt,Va,Zn,Yn,Mt,Ft,Ga,Ja,Wa,ze=U(()=>{zt();Xe();xr();vr();ke();P=class{constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Ft,byteLength:Ft,code:Mt,version:Mt,multihash:Mt,bytes:Mt,_baseCache:Ft,asCID:Ft})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==gt)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Va)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return P.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=Ue(e,t);return P.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Rn(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:i}=this;switch(n){case 0:return $a(t,i,e||se.encoder);default:return Ha(t,i,e||Ke.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return Ja(/^0\.0/,Wa),!!(e&&(e[Yn]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof P)return e;if(e!=null&&e.asCID===e){let{version:t,code:n,multihash:i,bytes:o}=e;return new P(t,n,i,o||Zn(t,n,i.bytes))}else if(e!=null&&e[Yn]===!0){let{version:t,multihash:n,code:i}=e,o=Lt(n);return P.create(t,i,o)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==gt)throw new Error(`Version 0 CID must use dag-pb (code: ${gt}) block encoding`);return new P(e,t,n,n.bytes)}case 1:{let i=Zn(e,t,n.bytes);return new P(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return P.create(0,gt,e)}static createV1(e,t){return P.create(1,e,t)}static decode(e){let[t,n]=P.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=P.inspectBytes(e),n=t.size-t.multihashSize,i=ie(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=i.subarray(t.multihashSize-t.digestSize),s=new yt(t.multihashCode,t.digestSize,o,i);return[t.version===0?P.createV0(s):P.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[_,B]=ht(e.subarray(t));return t+=B,_},i=n(),o=gt;if(i===18?(i=0,t=0):i===1&&(o=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=t,u=n(),a=n(),f=t+a,l=f-s;return{version:i,codec:o,multihashCode:u,digestSize:a,multihashSize:l,size:f}}static parse(e,t){let[n,i]=Ra(e,t),o=P.decode(i);return o._baseCache.set(n,e),o}},Ra=(r,e)=>{switch(r[0]){case"Q":{let t=e||se;return[se.prefix,t.decode(`${se.prefix}${r}`)]}case se.prefix:{let t=e||se;return[se.prefix,t.decode(r)]}case Ke.prefix:{let t=e||Ke;return[Ke.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},$a=(r,e,t)=>{let{prefix:n}=t;if(n!==se.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let o=t.encode(r).slice(1);return e.set(n,o),o}else return i},Ha=(r,e,t)=>{let{prefix:n}=t,i=e.get(n);if(i==null){let o=t.encode(r);return e.set(n,o),o}else return i},gt=112,Va=18,Zn=(r,e,t)=>{let n=We(r),i=n+We(e),o=new Uint8Array(i+t.byteLength);return Je(r,o,0),Je(e,o,n),o.set(t,i),o},Yn=Symbol.for("@ipld/js-cid/CID"),Mt={writable:!1,configurable:!1,enumerable:!0},Ft={writable:!1,enumerable:!1,configurable:!1},Ga="0.0.0-dev",Ja=(r,e)=>{if(r.test(Ga))console.warn(e);else throw new Error(e)},Wa=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var ti=E(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});var Za=["string","number","bigint","symbol"],Ya=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Qa(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";let e=typeof r;if(Za.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(r))return"Array";if(ec(r))return"Buffer";let t=tc(r);return t||"Object"}function ec(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function tc(r){let e=Object.prototype.toString.call(r).slice(8,-1);if(Ya.includes(e))return e}Br.is=Qa});var G=E($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});var C=class{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};C.uint=new C(0,"uint",!0);C.negint=new C(1,"negint",!0);C.bytes=new C(2,"bytes",!0);C.string=new C(3,"string",!0);C.array=new C(4,"array",!1);C.map=new C(5,"map",!1);C.tag=new C(6,"tag",!1);C.float=new C(7,"float",!0);C.false=new C(7,"false",!0);C.true=new C(7,"true",!0);C.null=new C(7,"null",!0);C.undefined=new C(7,"undefined",!0);C.break=new C(7,"break",!0);var ri=class{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};$t.Token=ri;$t.Type=C});var Ze=E(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var ye=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",rc=new TextDecoder,nc=new TextEncoder;function Ht(r){return ye&&globalThis.Buffer.isBuffer(r)}function ni(r){return r instanceof Uint8Array?Ht(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}var ic=ye?(r,e,t)=>t-e>64?globalThis.Buffer.from(r.subarray(e,t)).toString("utf8"):si(r,e,t):(r,e,t)=>t-e>64?rc.decode(r.subarray(e,t)):si(r,e,t),oc=ye?r=>r.length>64?globalThis.Buffer.from(r):oi(r):r=>r.length>64?nc.encode(r):oi(r),sc=r=>Uint8Array.from(r),ac=ye?(r,e,t)=>Ht(r)?new Uint8Array(r.subarray(e,t)):r.slice(e,t):(r,e,t)=>r.slice(e,t),cc=ye?(r,e)=>(r=r.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),ni(globalThis.Buffer.concat(r,e))):(r,e)=>{let t=new Uint8Array(e),n=0;for(let i of r)n+i.length>t.length&&(i=i.subarray(0,t.length-n)),t.set(i,n),n+=i.length;return t},uc=ye?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r),fc=ye?r=>typeof r=="string"?r:globalThis.Buffer.from(ii(r)).toString("hex"):r=>typeof r=="string"?r:Array.prototype.reduce.call(ii(r),(e,t)=>`${e}${t.toString(16).padStart(2,"0")}`,""),lc=ye?r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r,"hex"):r=>r instanceof Uint8Array?r:r.length?new Uint8Array(r.split("").map((e,t,n)=>t%2==0?`0x${e}${n[t+1]}`:"").filter(Boolean).map(e=>parseInt(e,16))):new Uint8Array(0);function ii(r){if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")}function dc(r,e){if(Ht(r)&&Ht(e))return r.compare(e);for(let t=0;t<r.length;t++)if(r[t]!==e[t])return r[t]<e[t]?-1:1;return 0}function oi(r,e=1/0){let t,n=r.length,i=null,o=[];for(let s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function si(r,e,t){let n=[];for(;e<t;){let i=r[e],o=null,s=i>239?4:i>223?3:i>191?2:1;if(e+s<=t){let u,a,f,l;switch(s){case 1:i<128&&(o=i);break;case 2:u=r[e+1],(u&192)==128&&(l=(i&31)<<6|u&63,l>127&&(o=l));break;case 3:u=r[e+1],a=r[e+2],(u&192)==128&&(a&192)==128&&(l=(i&15)<<12|(u&63)<<6|a&63,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:u=r[e+1],a=r[e+2],f=r[e+3],(u&192)==128&&(a&192)==128&&(f&192)==128&&(l=(i&15)<<18|(u&63)<<12|(a&63)<<6|f&63,l>65535&&l<1114112&&(o=l))}}o===null?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),e+=s}return ci(n)}var ai=4096;function ci(r){let e=r.length;if(e<=ai)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=ai));return t}R.alloc=uc;R.asU8A=ni;R.compare=dc;R.concat=cc;R.decodeCodePointsArray=ci;R.fromArray=sc;R.fromHex=lc;R.fromString=oc;R.slice=ac;R.toHex=fc;R.toString=ic;R.useBuffer=ye});var fi=E(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});var Ar=Ze(),hc=256,ui=class{constructor(e=hc){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let i=t.length-(this.maxCursor-this.cursor)-1;t.set(e,i)}else{if(t){let i=t.length-(this.maxCursor-this.cursor)-1;i<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=Ar.alloc(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=Ar.slice(n,0,this.cursor)}else t=Ar.concat(this.chunks,this.cursor);return e&&this.reset(),t}};Sr.Bl=ui});var Y=E(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});var li="CBOR decode error:",pc="CBOR encode error:",Ye=[];Ye[23]=1;Ye[24]=2;Ye[25]=3;Ye[26]=5;Ye[27]=9;function yc(r,e,t){if(r.length-e<t)throw new Error(`${li} not enough data for type`)}Qe.assertEnoughData=yc;Qe.decodeErrPrefix=li;Qe.encodeErrPrefix=pc;Qe.uintMinorPrefixBytes=Ye});var ce=E(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});var Be=G(),ae=Y(),$=[24,256,65536,4294967296,BigInt("18446744073709551616")];function di(r,e,t){ae.assertEnoughData(r,e,1);let n=r[e];if(t.strict===!0&&n<$[0])throw new Error(`${ae.decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function hi(r,e,t){ae.assertEnoughData(r,e,2);let n=r[e]<<8|r[e+1];if(t.strict===!0&&n<$[1])throw new Error(`${ae.decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function pi(r,e,t){ae.assertEnoughData(r,e,4);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3];if(t.strict===!0&&n<$[2])throw new Error(`${ae.decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function yi(r,e,t){ae.assertEnoughData(r,e,8);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3],i=r[e+4]*16777216+(r[e+5]<<16)+(r[e+6]<<8)+r[e+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(t.strict===!0&&o<$[3])throw new Error(`${ae.decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(t.allowBigInt===!0)return o;throw new Error(`${ae.decodeErrPrefix} integers outside of the safe integer range are not supported`)}function gc(r,e,t,n){return new Be.Token(Be.Type.uint,di(r,e+1,n),2)}function mc(r,e,t,n){return new Be.Token(Be.Type.uint,hi(r,e+1,n),3)}function wc(r,e,t,n){return new Be.Token(Be.Type.uint,pi(r,e+1,n),5)}function bc(r,e,t,n){return new Be.Token(Be.Type.uint,yi(r,e+1,n),9)}function Nr(r,e){return Vt(r,0,e.value)}function Vt(r,e,t){if(t<$[0]){let n=Number(t);r.push([e|n])}else if(t<$[1]){let n=Number(t);r.push([e|24,n])}else if(t<$[2]){let n=Number(t);r.push([e|25,n>>>8,n&255])}else if(t<$[3]){let n=Number(t);r.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(t);if(n<$[4]){let i=[e|27,0,0,0,0,0,0,0],o=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=o&255,o=o>>8,i[7]=o&255,o=o>>8,i[6]=o&255,o=o>>8,i[5]=o&255,i[4]=s&255,s=s>>8,i[3]=s&255,s=s>>8,i[2]=s&255,s=s>>8,i[1]=s&255,r.push(i)}else throw new Error(`${ae.decodeErrPrefix} encountered BigInt larger than allowable range`)}}Nr.encodedSize=function(e){return Vt.encodedSize(e.value)};Vt.encodedSize=function(e){return e<$[0]?1:e<$[1]?2:e<$[2]?3:e<$[3]?5:9};Nr.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};J.decodeUint16=mc;J.decodeUint32=wc;J.decodeUint64=bc;J.decodeUint8=gc;J.encodeUint=Nr;J.encodeUintValue=Vt;J.readUint16=hi;J.readUint32=pi;J.readUint64=yi;J.readUint8=di;J.uintBoundaries=$});var Pr=E(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});var ue=G(),ge=ce(),_c=Y();function Tc(r,e,t,n){return new ue.Token(ue.Type.negint,-1-ge.readUint8(r,e+1,n),2)}function xc(r,e,t,n){return new ue.Token(ue.Type.negint,-1-ge.readUint16(r,e+1,n),3)}function kc(r,e,t,n){return new ue.Token(ue.Type.negint,-1-ge.readUint32(r,e+1,n),5)}var Dr=BigInt(-1),gi=BigInt(1);function vc(r,e,t,n){let i=ge.readUint64(r,e+1,n);if(typeof i!="bigint"){let o=-1-i;if(o>=Number.MIN_SAFE_INTEGER)return new ue.Token(ue.Type.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${_c.decodeErrPrefix} integers outside of the safe integer range are not supported`);return new ue.Token(ue.Type.negint,Dr-BigInt(i),9)}function jr(r,e){let t=e.value,n=typeof t=="bigint"?t*Dr-gi:t*-1-1;ge.encodeUintValue(r,e.type.majorEncoded,n)}jr.encodedSize=function(e){let t=e.value,n=typeof t=="bigint"?t*Dr-gi:t*-1-1;return n<ge.uintBoundaries[0]?1:n<ge.uintBoundaries[1]?2:n<ge.uintBoundaries[2]?3:n<ge.uintBoundaries[3]?5:9};jr.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};Le.decodeNegint16=xc;Le.decodeNegint32=kc;Le.decodeNegint64=vc;Le.decodeNegint8=Tc;Le.encodeNegint=jr});var Jt=E(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});var Cr=G(),mi=Y(),et=ce(),Or=Ze();function mt(r,e,t,n){mi.assertEnoughData(r,e,t+n);let i=Or.slice(r,e+t,e+t+n);return new Cr.Token(Cr.Type.bytes,i,t+n)}function Ec(r,e,t,n){return mt(r,e,1,t)}function Bc(r,e,t,n){return mt(r,e,2,et.readUint8(r,e+1,n))}function Ac(r,e,t,n){return mt(r,e,3,et.readUint16(r,e+1,n))}function Sc(r,e,t,n){return mt(r,e,5,et.readUint32(r,e+1,n))}function Nc(r,e,t,n){let i=et.readUint64(r,e+1,n);if(typeof i=="bigint")throw new Error(`${mi.decodeErrPrefix} 64-bit integer bytes lengths not supported`);return mt(r,e,9,i)}function Gt(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===Cr.Type.string?Or.fromString(r.value):r.value),r.encodedBytes}function Ur(r,e){let t=Gt(e);et.encodeUintValue(r,e.type.majorEncoded,t.length),r.push(t)}Ur.encodedSize=function(e){let t=Gt(e);return et.encodeUintValue.encodedSize(t.length)+t.length};Ur.compareTokens=function(e,t){return wi(Gt(e),Gt(t))};function wi(r,e){return r.length<e.length?-1:r.length>e.length?1:Or.compare(r,e)}me.compareBytes=wi;me.decodeBytes16=Ac;me.decodeBytes32=Sc;me.decodeBytes64=Nc;me.decodeBytes8=Bc;me.decodeBytesCompact=Ec;me.encodeBytes=Ur});var zr=E(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});var bi=G(),_i=Y(),Wt=ce(),Dc=Jt(),Ti=Ze();function wt(r,e,t,n,i){let o=t+n;_i.assertEnoughData(r,e,o);let s=new bi.Token(bi.Type.string,Ti.toString(r,e+t,e+o),o);return i.retainStringBytes===!0&&(s.byteValue=Ti.slice(r,e+t,e+o)),s}function jc(r,e,t,n){return wt(r,e,1,t,n)}function Pc(r,e,t,n){return wt(r,e,2,Wt.readUint8(r,e+1,n),n)}function Cc(r,e,t,n){return wt(r,e,3,Wt.readUint16(r,e+1,n),n)}function Oc(r,e,t,n){return wt(r,e,5,Wt.readUint32(r,e+1,n),n)}function Uc(r,e,t,n){let i=Wt.readUint64(r,e+1,n);if(typeof i=="bigint")throw new Error(`${_i.decodeErrPrefix} 64-bit integer string lengths not supported`);return wt(r,e,9,i,n)}var zc=Dc.encodeBytes;Ae.decodeString16=Cc;Ae.decodeString32=Oc;Ae.decodeString64=Uc;Ae.decodeString8=Pc;Ae.decodeStringCompact=jc;Ae.encodeString=zc});var Mr=E(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});var Lr=G(),Ie=ce(),xi=Y();function tt(r,e,t,n){return new Lr.Token(Lr.Type.array,n,t)}function Lc(r,e,t,n){return tt(r,e,1,t)}function Ic(r,e,t,n){return tt(r,e,2,Ie.readUint8(r,e+1,n))}function Mc(r,e,t,n){return tt(r,e,3,Ie.readUint16(r,e+1,n))}function Fc(r,e,t,n){return tt(r,e,5,Ie.readUint32(r,e+1,n))}function qc(r,e,t,n){let i=Ie.readUint64(r,e+1,n);if(typeof i=="bigint")throw new Error(`${xi.decodeErrPrefix} 64-bit integer array lengths not supported`);return tt(r,e,9,i)}function Rc(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${xi.decodeErrPrefix} indefinite length items not allowed`);return tt(r,e,1,1/0)}function Ir(r,e){Ie.encodeUintValue(r,Lr.Type.array.majorEncoded,e.value)}Ir.compareTokens=Ie.encodeUint.compareTokens;Ir.encodedSize=function(e){return Ie.encodeUintValue.encodedSize(e.value)};we.decodeArray16=Mc;we.decodeArray32=Fc;we.decodeArray64=qc;we.decodeArray8=Ic;we.decodeArrayCompact=Lc;we.decodeArrayIndefinite=Rc;we.encodeArray=Ir});var Rr=E(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});var Fr=G(),Me=ce(),ki=Y();function rt(r,e,t,n){return new Fr.Token(Fr.Type.map,n,t)}function $c(r,e,t,n){return rt(r,e,1,t)}function Hc(r,e,t,n){return rt(r,e,2,Me.readUint8(r,e+1,n))}function Vc(r,e,t,n){return rt(r,e,3,Me.readUint16(r,e+1,n))}function Gc(r,e,t,n){return rt(r,e,5,Me.readUint32(r,e+1,n))}function Jc(r,e,t,n){let i=Me.readUint64(r,e+1,n);if(typeof i=="bigint")throw new Error(`${ki.decodeErrPrefix} 64-bit integer map lengths not supported`);return rt(r,e,9,i)}function Wc(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${ki.decodeErrPrefix} indefinite length items not allowed`);return rt(r,e,1,1/0)}function qr(r,e){Me.encodeUintValue(r,Fr.Type.map.majorEncoded,e.value)}qr.compareTokens=Me.encodeUint.compareTokens;qr.encodedSize=function(e){return Me.encodeUintValue.encodedSize(e.value)};be.decodeMap16=Vc;be.decodeMap32=Gc;be.decodeMap64=Jc;be.decodeMap8=Hc;be.decodeMapCompact=$c;be.decodeMapIndefinite=Wc;be.encodeMap=qr});var Hr=E(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});var Q=G(),Fe=ce();function Xc(r,e,t,n){return new Q.Token(Q.Type.tag,t,1)}function Kc(r,e,t,n){return new Q.Token(Q.Type.tag,Fe.readUint8(r,e+1,n),2)}function Zc(r,e,t,n){return new Q.Token(Q.Type.tag,Fe.readUint16(r,e+1,n),3)}function Yc(r,e,t,n){return new Q.Token(Q.Type.tag,Fe.readUint32(r,e+1,n),5)}function Qc(r,e,t,n){return new Q.Token(Q.Type.tag,Fe.readUint64(r,e+1,n),9)}function $r(r,e){Fe.encodeUintValue(r,Q.Type.tag.majorEncoded,e.value)}$r.compareTokens=Fe.encodeUint.compareTokens;$r.encodedSize=function(e){return Fe.encodeUintValue.encodedSize(e.value)};Se.decodeTag16=Zc;Se.decodeTag32=Yc;Se.decodeTag64=Qc;Se.decodeTag8=Kc;Se.decodeTagCompact=Xc;Se.encodeTag=$r});var Xr=E(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});var W=G(),qe=Y(),eu=ce(),tu=20,ru=21,nu=22,iu=23;function ou(r,e,t,n){if(n.allowUndefined===!1)throw new Error(`${qe.decodeErrPrefix} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new W.Token(W.Type.null,null,1):new W.Token(W.Type.undefined,void 0,1)}function su(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${qe.decodeErrPrefix} indefinite length items not allowed`);return new W.Token(W.Type.break,void 0,1)}function Vr(r,e,t){if(t){if(t.allowNaN===!1&&Number.isNaN(r))throw new Error(`${qe.decodeErrPrefix} NaN values are not supported`);if(t.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${qe.decodeErrPrefix} Infinity values are not supported`)}return new W.Token(W.Type.float,r,e)}function au(r,e,t,n){return Vr(Jr(r,e+1),3,n)}function cu(r,e,t,n){return Vr(Wr(r,e+1),5,n)}function uu(r,e,t,n){return Vr(Ai(r,e+1),9,n)}function Gr(r,e,t){let n=e.value;if(n===!1)r.push([W.Type.float.majorEncoded|tu]);else if(n===!0)r.push([W.Type.float.majorEncoded|ru]);else if(n===null)r.push([W.Type.float.majorEncoded|nu]);else if(n===void 0)r.push([W.Type.float.majorEncoded|iu]);else{let i,o=!1;(!t||t.float64!==!0)&&(Ei(n),i=Jr(ee,1),n===i||Number.isNaN(n)?(ee[0]=249,r.push(ee.slice(0,3)),o=!0):(Bi(n),i=Wr(ee,1),n===i&&(ee[0]=250,r.push(ee.slice(0,5)),o=!0))),o||(fu(n),i=Ai(ee,1),ee[0]=251,r.push(ee.slice(0,9)))}}Gr.encodedSize=function(e,t){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){Ei(n);let i=Jr(ee,1);if(n===i||Number.isNaN(n))return 3;if(Bi(n),i=Wr(ee,1),n===i)return 5}return 9};var vi=new ArrayBuffer(9),X=new DataView(vi,1),ee=new Uint8Array(vi,0);function Ei(r){if(r===1/0)X.setUint16(0,31744,!1);else if(r===-1/0)X.setUint16(0,64512,!1);else if(Number.isNaN(r))X.setUint16(0,32256,!1);else{X.setFloat32(0,r);let e=X.getUint32(0),t=(e&2139095040)>>23,n=e&8388607;if(t===255)X.setUint16(0,31744,!1);else if(t===0)X.setUint16(0,(r&2147483648)>>16|n>>13,!1);else{let i=t-127;i<-24?X.setUint16(0,0):i<-14?X.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):X.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function Jr(r,e){if(r.length-e<2)throw new Error(`${qe.decodeErrPrefix} not enough data for float16`);let t=(r[e]<<8)+r[e+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;let n=t>>10&31,i=t&1023,o;return n===0?o=i*2**-24:n!==31?o=(i+1024)*2**(n-25):o=i===0?1/0:NaN,t&32768?-o:o}function Bi(r){X.setFloat32(0,r,!1)}function Wr(r,e){if(r.length-e<4)throw new Error(`${qe.decodeErrPrefix} not enough data for float32`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,4).getFloat32(0,!1)}function fu(r){X.setFloat64(0,r,!1)}function Ai(r,e){if(r.length-e<8)throw new Error(`${qe.decodeErrPrefix} not enough data for float64`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,8).getFloat64(0,!1)}Gr.compareTokens=eu.encodeUint.compareTokens;Ne.decodeBreak=su;Ne.decodeFloat16=au;Ne.decodeFloat32=cu;Ne.decodeFloat64=uu;Ne.decodeUndefined=ou;Ne.encodeFloat=Gr});var Kr=E(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});var O=G(),Xt=ce(),Kt=Pr(),bt=Jt(),_t=zr(),nt=Mr(),it=Rr(),Tt=Hr(),xt=Xr(),Si=Y(),_e=Ze();function D(r,e,t){throw new Error(`${Si.decodeErrPrefix} encountered invalid minor (${t}) for major ${r[e]>>>5}`)}function Zt(r){return()=>{throw new Error(`${Si.decodeErrPrefix} ${r}`)}}var h=[];for(let r=0;r<=23;r++)h[r]=D;h[24]=Xt.decodeUint8;h[25]=Xt.decodeUint16;h[26]=Xt.decodeUint32;h[27]=Xt.decodeUint64;h[28]=D;h[29]=D;h[30]=D;h[31]=D;for(let r=32;r<=55;r++)h[r]=D;h[56]=Kt.decodeNegint8;h[57]=Kt.decodeNegint16;h[58]=Kt.decodeNegint32;h[59]=Kt.decodeNegint64;h[60]=D;h[61]=D;h[62]=D;h[63]=D;for(let r=64;r<=87;r++)h[r]=bt.decodeBytesCompact;h[88]=bt.decodeBytes8;h[89]=bt.decodeBytes16;h[90]=bt.decodeBytes32;h[91]=bt.decodeBytes64;h[92]=D;h[93]=D;h[94]=D;h[95]=Zt("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)h[r]=_t.decodeStringCompact;h[120]=_t.decodeString8;h[121]=_t.decodeString16;h[122]=_t.decodeString32;h[123]=_t.decodeString64;h[124]=D;h[125]=D;h[126]=D;h[127]=Zt("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)h[r]=nt.decodeArrayCompact;h[152]=nt.decodeArray8;h[153]=nt.decodeArray16;h[154]=nt.decodeArray32;h[155]=nt.decodeArray64;h[156]=D;h[157]=D;h[158]=D;h[159]=nt.decodeArrayIndefinite;for(let r=160;r<=183;r++)h[r]=it.decodeMapCompact;h[184]=it.decodeMap8;h[185]=it.decodeMap16;h[186]=it.decodeMap32;h[187]=it.decodeMap64;h[188]=D;h[189]=D;h[190]=D;h[191]=it.decodeMapIndefinite;for(let r=192;r<=215;r++)h[r]=Tt.decodeTagCompact;h[216]=Tt.decodeTag8;h[217]=Tt.decodeTag16;h[218]=Tt.decodeTag32;h[219]=Tt.decodeTag64;h[220]=D;h[221]=D;h[222]=D;h[223]=D;for(let r=224;r<=243;r++)h[r]=Zt("simple values are not supported");h[244]=D;h[245]=D;h[246]=D;h[247]=xt.decodeUndefined;h[248]=Zt("simple values are not supported");h[249]=xt.decodeFloat16;h[250]=xt.decodeFloat32;h[251]=xt.decodeFloat64;h[252]=D;h[253]=D;h[254]=D;h[255]=xt.decodeBreak;var fe=[];for(let r=0;r<24;r++)fe[r]=new O.Token(O.Type.uint,r,1);for(let r=-1;r>=-24;r--)fe[31-r]=new O.Token(O.Type.negint,r,1);fe[64]=new O.Token(O.Type.bytes,new Uint8Array(0),1);fe[96]=new O.Token(O.Type.string,"",1);fe[128]=new O.Token(O.Type.array,0,1);fe[160]=new O.Token(O.Type.map,0,1);fe[244]=new O.Token(O.Type.false,!1,1);fe[245]=new O.Token(O.Type.true,!0,1);fe[246]=new O.Token(O.Type.null,null,1);function lu(r){switch(r.type){case O.Type.false:return _e.fromArray([244]);case O.Type.true:return _e.fromArray([245]);case O.Type.null:return _e.fromArray([246]);case O.Type.bytes:return r.value.length?void 0:_e.fromArray([64]);case O.Type.string:return r.value===""?_e.fromArray([96]):void 0;case O.Type.array:return r.value===0?_e.fromArray([128]):void 0;case O.Type.map:return r.value===0?_e.fromArray([160]):void 0;case O.Type.uint:return r.value<24?_e.fromArray([Number(r.value)]):void 0;case O.Type.negint:if(r.value>=-24)return _e.fromArray([31-Number(r.value)])}}kt.jump=h;kt.quick=fe;kt.quickEncodeToken=lu});var Ui=E(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});var du=ti(),x=G(),Ni=fi(),Di=Y(),hu=Kr(),pu=Ze(),yu=ce(),gu=Pr(),mu=Jt(),wu=zr(),bu=Mr(),_u=Rr(),Tu=Hr(),xu=Xr(),ku={float64:!1,mapSorter:Eu,quickEncodeToken:hu.quickEncodeToken};function ji(){let r=[];return r[x.Type.uint.major]=yu.encodeUint,r[x.Type.negint.major]=gu.encodeNegint,r[x.Type.bytes.major]=mu.encodeBytes,r[x.Type.string.major]=wu.encodeString,r[x.Type.array.major]=bu.encodeArray,r[x.Type.map.major]=_u.encodeMap,r[x.Type.tag.major]=Tu.encodeTag,r[x.Type.float.major]=xu.encodeFloat,r}var Pi=ji(),Zr=new Ni.Bl,ot=class{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${Di.encodeErrPrefix} object contains circular references`);return new ot(t,e)}},De={null:new x.Token(x.Type.null,null),undefined:new x.Token(x.Type.undefined,void 0),true:new x.Token(x.Type.true,!0),false:new x.Token(x.Type.false,!1),emptyArray:new x.Token(x.Type.array,0),emptyMap:new x.Token(x.Type.map,0)},je={number(r,e,t,n){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new x.Token(x.Type.float,r):r>=0?new x.Token(x.Type.uint,r):new x.Token(x.Type.negint,r)},bigint(r,e,t,n){return r>=BigInt(0)?new x.Token(x.Type.uint,r):new x.Token(x.Type.negint,r)},Uint8Array(r,e,t,n){return new x.Token(x.Type.bytes,r)},string(r,e,t,n){return new x.Token(x.Type.string,r)},boolean(r,e,t,n){return r?De.true:De.false},null(r,e,t,n){return De.null},undefined(r,e,t,n){return De.undefined},ArrayBuffer(r,e,t,n){return new x.Token(x.Type.bytes,new Uint8Array(r))},DataView(r,e,t,n){return new x.Token(x.Type.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,e,t,n){if(!r.length)return t.addBreakTokens===!0?[De.emptyArray,new x.Token(x.Type.break)]:De.emptyArray;n=ot.createCheck(n,r);let i=[],o=0;for(let s of r)i[o++]=vt(s,t,n);return t.addBreakTokens?[new x.Token(x.Type.array,r.length),i,new x.Token(x.Type.break)]:[new x.Token(x.Type.array,r.length),i]},Object(r,e,t,n){let i=e!=="Object",o=i?r.keys():Object.keys(r),s=i?r.size:o.length;if(!s)return t.addBreakTokens===!0?[De.emptyMap,new x.Token(x.Type.break)]:De.emptyMap;n=ot.createCheck(n,r);let u=[],a=0;for(let f of o)u[a++]=[vt(f,t,n),vt(i?r.get(f):r[f],t,n)];return vu(u,t),t.addBreakTokens?[new x.Token(x.Type.map,s),u,new x.Token(x.Type.break)]:[new x.Token(x.Type.map,s),u]}};je.Map=je.Object;je.Buffer=je.Uint8Array;for(let r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))je[`${r}Array`]=je.DataView;function vt(r,e={},t){let n=du.is(r),i=e&&e.typeEncoders&&e.typeEncoders[n]||je[n];if(typeof i=="function"){let s=i(r,n,e,t);if(s!=null)return s}let o=je[n];if(!o)throw new Error(`${Di.encodeErrPrefix} unsupported type: ${n}`);return o(r,n,e,t)}function vu(r,e){e.mapSorter&&r.sort(e.mapSorter)}function Eu(r,e){let t=Array.isArray(r[0])?r[0][0]:r[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(t.type!==n.type)return t.type.compare(n.type);let i=t.type.major,o=Pi[i].compareTokens(t,n);return o===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),o}function Ci(r,e,t,n){if(Array.isArray(e))for(let i of e)Ci(r,i,t,n);else t[e.type.major](r,e,n)}function Oi(r,e,t){let n=vt(r,t);if(!Array.isArray(n)&&t.quickEncodeToken){let i=t.quickEncodeToken(n);if(i)return i;let o=e[n.type.major];if(o.encodedSize){let s=o.encodedSize(n,t),u=new Ni.Bl(s);if(o(u,n,t),u.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return pu.asU8A(u.chunks[0])}}return Zr.reset(),Ci(Zr,n,e,t),Zr.toBytes(!0)}function Bu(r,e){return e=Object.assign({},ku,e),Oi(r,Pi,e)}Re.Ref=ot;Re.encode=Bu;Re.encodeCustom=Oi;Re.makeCborEncoders=ji;Re.objectToTokens=vt});var Li=E(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});var K=Y(),Yt=G(),zi=Kr(),Au={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},Yr=class{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],t=zi.quick[e];if(t===void 0){let n=zi.jump[e];if(!n)throw new Error(`${K.decodeErrPrefix} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let i=e&31;t=n(this.data,this.pos,i,this.options)}return this.pos+=t.encodedLength,t}},Et=Symbol.for("DONE"),Qt=Symbol.for("BREAK");function Su(r,e,t){let n=[];for(let i=0;i<r.value;i++){let o=st(e,t);if(o===Qt){if(r.value===1/0)break;throw new Error(`${K.decodeErrPrefix} got unexpected break to lengthed array`)}if(o===Et)throw new Error(`${K.decodeErrPrefix} found array but not enough entries (got ${i}, expected ${r.value})`);n[i]=o}return n}function Nu(r,e,t){let n=t.useMaps===!0,i=n?void 0:{},o=n?new Map:void 0;for(let s=0;s<r.value;s++){let u=st(e,t);if(u===Qt){if(r.value===1/0)break;throw new Error(`${K.decodeErrPrefix} got unexpected break to lengthed map`)}if(u===Et)throw new Error(`${K.decodeErrPrefix} found map but not enough entries (got ${s} [no key], expected ${r.value})`);if(n!==!0&&typeof u!="string")throw new Error(`${K.decodeErrPrefix} non-string keys not supported (got ${typeof u})`);let a=st(e,t);if(a===Et)throw new Error(`${K.decodeErrPrefix} found map but not enough entries (got ${s} [no value], expected ${r.value})`);n?o.set(u,a):i[u]=a}return n?o:i}function st(r,e){if(r.done())return Et;let t=r.next();if(t.type===Yt.Type.break)return Qt;if(t.type.terminal)return t.value;if(t.type===Yt.Type.array)return Su(t,r,e);if(t.type===Yt.Type.map)return Nu(t,r,e);if(t.type===Yt.Type.tag){if(e.tags&&typeof e.tags[t.value]=="function"){let n=st(r,e);return e.tags[t.value](n)}throw new Error(`${K.decodeErrPrefix} tag not supported (${t.value})`)}throw new Error("unsupported")}function Du(r,e){if(!(r instanceof Uint8Array))throw new Error(`${K.decodeErrPrefix} data to decode must be a Uint8Array`);e=Object.assign({},Au,e);let t=e.tokenizer||new Yr(r,e),n=st(t,e);if(n===Et)throw new Error(`${K.decodeErrPrefix} did not find any content to decode`);if(n===Qt)throw new Error(`${K.decodeErrPrefix} got unexpected break`);if(!t.done())throw new Error(`${K.decodeErrPrefix} too many terminals, data makes no sense`);return n}Bt.Tokeniser=Yr;Bt.decode=Du;Bt.tokensToObject=st});var Mi=E(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});var ju=Ui(),Pu=Li(),Ii=G();at.encode=ju.encode;at.decode=Pu.decode;at.Token=Ii.Token;at.Type=Ii.Type});var rr,nr=U(()=>{ke();rr=85});var en={};F(en,{identity:()=>Qr});var qi,zu,Ri,Lu,Qr,tn=U(()=>{ke();Xe();qi=0,zu="identity",Ri=ie,Lu=r=>Ue(qi,Ri(r)),Qr={code:qi,name:zu,encode:Ri,digest:Lu}});var Vi=E((id,Hi)=>{"use strict";function $i(r,e){for(let t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function Iu(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return $i(r,t)}catch(n){t.message=r.message,t.stack=r.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(r)),$i(new i,t)}}Hi.exports=Iu});var Ji=E((od,Gi)=>{"use strict";Gi.exports=Mu;function Mu(r,e){for(var t=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)t[n++]=arguments[i++];return new Promise(function(u,a){t[n]=function(l){if(o)if(o=!1,l)a(l);else{for(var _=new Array(arguments.length-1),B=0;B<_.length;)_[B++]=arguments[B];u.apply(null,_)}};try{r.apply(e||null,t)}catch(f){o&&(o=!1,a(f))}})}});var Zi=E(Ki=>{"use strict";var ir=Ki;ir.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&e.charAt(t)==="=";)++n;return Math.ceil(e.length*3)/4-n};var ct=new Array(64),Wi=new Array(123);for(te=0;te<64;)Wi[ct[te]=te<26?te+65:te<52?te+71:te<62?te-4:te-59|43]=te++;var te;ir.encode=function(e,t,n){for(var i=null,o=[],s=0,u=0,a;t<n;){var f=e[t++];switch(u){case 0:o[s++]=ct[f>>2],a=(f&3)<<4,u=1;break;case 1:o[s++]=ct[a|f>>4],a=(f&15)<<2,u=2;break;case 2:o[s++]=ct[a|f>>6],o[s++]=ct[f&63],u=0;break}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0)}return u&&(o[s++]=ct[a],o[s++]=61,u===1&&(o[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))};var Xi="invalid encoding";ir.decode=function(e,t,n){for(var i=n,o=0,s,u=0;u<e.length;){var a=e.charCodeAt(u++);if(a===61&&o>1)break;if((a=Wi[a])===void 0)throw Error(Xi);switch(o){case 0:s=a,o=1;break;case 1:t[n++]=s<<2|(a&48)>>4,s=a,o=2;break;case 2:t[n++]=(s&15)<<4|(a&60)>>2,s=a,o=3;break;case 3:t[n++]=(s&3)<<6|a,o=0;break}}if(o===1)throw Error(Xi);return n-i};ir.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var Qi=E((ad,Yi)=>{"use strict";Yi.exports=or;function or(){this._listeners={}}or.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this};or.prototype.off=function(e,t){if(e===void 0)this._listeners={};else if(t===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===t?n.splice(i,1):++i;return this};or.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this}});var so=E((cd,oo)=>{"use strict";oo.exports=eo(eo);function eo(r){return typeof Float32Array!="undefined"?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),n=t[3]===128;function i(a,f,l){e[0]=a,f[l]=t[0],f[l+1]=t[1],f[l+2]=t[2],f[l+3]=t[3]}function o(a,f,l){e[0]=a,f[l]=t[3],f[l+1]=t[2],f[l+2]=t[1],f[l+3]=t[0]}r.writeFloatLE=n?i:o,r.writeFloatBE=n?o:i;function s(a,f){return t[0]=a[f],t[1]=a[f+1],t[2]=a[f+2],t[3]=a[f+3],e[0]}function u(a,f){return t[3]=a[f],t[2]=a[f+1],t[1]=a[f+2],t[0]=a[f+3],e[0]}r.readFloatLE=n?s:u,r.readFloatBE=n?u:s}():function(){function e(n,i,o,s){var u=i<0?1:0;if(u&&(i=-i),i===0)n(1/i>0?0:2147483648,o,s);else if(isNaN(i))n(2143289344,o,s);else if(i>34028234663852886e22)n((u<<31|2139095040)>>>0,o,s);else if(i<11754943508222875e-54)n((u<<31|Math.round(i/1401298464324817e-60))>>>0,o,s);else{var a=Math.floor(Math.log(i)/Math.LN2),f=Math.round(i*Math.pow(2,-a)*8388608)&8388607;n((u<<31|a+127<<23|f)>>>0,o,s)}}r.writeFloatLE=e.bind(null,to),r.writeFloatBE=e.bind(null,ro);function t(n,i,o){var s=n(i,o),u=(s>>31)*2+1,a=s>>>23&255,f=s&8388607;return a===255?f?NaN:u*(1/0):a===0?u*1401298464324817e-60*f:u*Math.pow(2,a-150)*(f+8388608)}r.readFloatLE=t.bind(null,no),r.readFloatBE=t.bind(null,io)}(),typeof Float64Array!="undefined"?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),n=t[7]===128;function i(a,f,l){e[0]=a,f[l]=t[0],f[l+1]=t[1],f[l+2]=t[2],f[l+3]=t[3],f[l+4]=t[4],f[l+5]=t[5],f[l+6]=t[6],f[l+7]=t[7]}function o(a,f,l){e[0]=a,f[l]=t[7],f[l+1]=t[6],f[l+2]=t[5],f[l+3]=t[4],f[l+4]=t[3],f[l+5]=t[2],f[l+6]=t[1],f[l+7]=t[0]}r.writeDoubleLE=n?i:o,r.writeDoubleBE=n?o:i;function s(a,f){return t[0]=a[f],t[1]=a[f+1],t[2]=a[f+2],t[3]=a[f+3],t[4]=a[f+4],t[5]=a[f+5],t[6]=a[f+6],t[7]=a[f+7],e[0]}function u(a,f){return t[7]=a[f],t[6]=a[f+1],t[5]=a[f+2],t[4]=a[f+3],t[3]=a[f+4],t[2]=a[f+5],t[1]=a[f+6],t[0]=a[f+7],e[0]}r.readDoubleLE=n?s:u,r.readDoubleBE=n?u:s}():function(){function e(n,i,o,s,u,a){var f=s<0?1:0;if(f&&(s=-s),s===0)n(0,u,a+i),n(1/s>0?0:2147483648,u,a+o);else if(isNaN(s))n(0,u,a+i),n(2146959360,u,a+o);else if(s>17976931348623157e292)n(0,u,a+i),n((f<<31|2146435072)>>>0,u,a+o);else{var l;if(s<22250738585072014e-324)l=s/5e-324,n(l>>>0,u,a+i),n((f<<31|l/4294967296)>>>0,u,a+o);else{var _=Math.floor(Math.log(s)/Math.LN2);_===1024&&(_=1023),l=s*Math.pow(2,-_),n(l*4503599627370496>>>0,u,a+i),n((f<<31|_+1023<<20|l*1048576&1048575)>>>0,u,a+o)}}}r.writeDoubleLE=e.bind(null,to,0,4),r.writeDoubleBE=e.bind(null,ro,4,0);function t(n,i,o,s,u){var a=n(s,u+i),f=n(s,u+o),l=(f>>31)*2+1,_=f>>>20&2047,B=4294967296*(f&1048575)+a;return _===2047?B?NaN:l*(1/0):_===0?l*5e-324*B:l*Math.pow(2,_-1075)*(B+4503599627370496)}r.readDoubleLE=t.bind(null,no,0,4),r.readDoubleBE=t.bind(null,io,4,0)}(),r}function to(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}function ro(r,e,t){e[t]=r>>>24,e[t+1]=r>>>16&255,e[t+2]=r>>>8&255,e[t+3]=r&255}function no(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0}function io(r,e){return(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}});var ao=E((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}});var uo=E(co=>{"use strict";var rn=co;rn.length=function(e){for(var t=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?t+=1:n<2048?t+=2:(n&64512)==55296&&(e.charCodeAt(i+1)&64512)==56320?(++i,t+=4):t+=3;return t};rn.read=function(e,t,n){var i=n-t;if(i<1)return"";for(var o=null,s=[],u=0,a;t<n;)a=e[t++],a<128?s[u++]=a:a>191&&a<224?s[u++]=(a&31)<<6|e[t++]&63:a>239&&a<365?(a=((a&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,s[u++]=55296+(a>>10),s[u++]=56320+(a&1023)):s[u++]=(a&15)<<12|(e[t++]&63)<<6|e[t++]&63,u>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),u=0);return o?(u&&o.push(String.fromCharCode.apply(String,s.slice(0,u))),o.join("")):String.fromCharCode.apply(String,s.slice(0,u))};rn.write=function(e,t,n){for(var i=n,o,s,u=0;u<e.length;++u)o=e.charCodeAt(u),o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)==55296&&((s=e.charCodeAt(u+1))&64512)==56320?(o=65536+((o&1023)<<10)+(s&1023),++u,t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128);return n-i}});var lo=E((fd,fo)=>{"use strict";fo.exports=Fu;function Fu(r,e,t){var n=t||8192,i=n>>>1,o=null,s=n;return function(a){if(a<1||a>i)return r(a);s+a>n&&(o=r(n),s=0);var f=e.call(o,s,s+=a);return s&7&&(s=(s|7)+1),f}}});var po=E((ld,ho)=>{"use strict";ho.exports=I;var St=Ce();function I(r,e){this.lo=r>>>0,this.hi=e>>>0}var $e=I.zero=new I(0,0);$e.toNumber=function(){return 0};$e.zzEncode=$e.zzDecode=function(){return this};$e.length=function(){return 1};var qu=I.zeroHash="\0\0\0\0\0\0\0\0";I.fromNumber=function(e){if(e===0)return $e;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new I(n,i)};I.from=function(e){if(typeof e=="number")return I.fromNumber(e);if(St.isString(e))if(St.Long)e=St.Long.fromString(e);else return I.fromNumber(parseInt(e,10));return e.low||e.high?new I(e.low>>>0,e.high>>>0):$e};I.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296};I.prototype.toLong=function(e){return St.Long?new St.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var Pe=String.prototype.charCodeAt;I.fromHash=function(e){return e===qu?$e:new I((Pe.call(e,0)|Pe.call(e,1)<<8|Pe.call(e,2)<<16|Pe.call(e,3)<<24)>>>0,(Pe.call(e,4)|Pe.call(e,5)<<8|Pe.call(e,6)<<16|Pe.call(e,7)<<24)>>>0)};I.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};I.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};I.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};I.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}});var Ce=E(nn=>{"use strict";var T=nn;T.asPromise=Ji();T.base64=Zi();T.EventEmitter=Qi();T.float=so();T.inquire=ao();T.utf8=uo();T.pool=lo();T.LongBits=po();T.isNode=Boolean(typeof globalThis!="undefined"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);T.global=T.isNode&&globalThis||typeof window!="undefined"&&window||typeof self!="undefined"&&self||nn;T.emptyArray=Object.freeze?Object.freeze([]):[];T.emptyObject=Object.freeze?Object.freeze({}):{};T.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};T.isString=function(e){return typeof e=="string"||e instanceof String};T.isObject=function(e){return e&&typeof e=="object"};T.isset=T.isSet=function(e,t){var n=e[t];return n!=null&&e.hasOwnProperty(t)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};T.Buffer=function(){try{var r=T.inquire("buffer").Buffer;return r.prototype.utf8Write?r:null}catch(e){return null}}();T._Buffer_from=null;T._Buffer_allocUnsafe=null;T.newBuffer=function(e){return typeof e=="number"?T.Buffer?T._Buffer_allocUnsafe(e):new T.Array(e):T.Buffer?T._Buffer_from(e):typeof Uint8Array=="undefined"?e:new Uint8Array(e)};T.Array=typeof Uint8Array!="undefined"?Uint8Array:Array;T.Long=T.global.dcodeIO&&T.global.dcodeIO.Long||T.global.Long||T.inquire("long");T.key2Re=/^true|false|0|1$/;T.key32Re=/^-?(?:0|[1-9][0-9]*)$/;T.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;T.longToHash=function(e){return e?T.LongBits.from(e).toHash():T.LongBits.zeroHash};T.longFromHash=function(e,t){var n=T.LongBits.fromHash(e);return T.Long?T.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))};function yo(r,e,t){for(var n=Object.keys(e),i=0;i<n.length;++i)(r[n[i]]===void 0||!t)&&(r[n[i]]=e[n[i]]);return r}T.merge=yo;T.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function go(r){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&yo(this,n)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return r}}),e.prototype.toString=function(){return this.name+": "+this.message},e}T.newError=go;T.ProtocolError=go("ProtocolError");T.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var i=Object.keys(this),o=i.length-1;o>-1;--o)if(t[i[o]]===1&&this[i[o]]!==void 0&&this[i[o]]!==null)return i[o]}};T.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}};T.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};T._configure=function(){var r=T.Buffer;if(!r){T._Buffer_from=T._Buffer_allocUnsafe=null;return}T._Buffer_from=r.from!==Uint8Array.from&&r.from||function(t,n){return new r(t,n)},T._Buffer_allocUnsafe=r.allocUnsafe||function(t){return new r(t)}}});var ln=E((hd,_o)=>{"use strict";_o.exports=N;var Z=Ce(),on,sr=Z.LongBits,mo=Z.base64,wo=Z.utf8;function Nt(r,e,t){this.fn=r,this.len=e,this.next=void 0,this.val=t}function sn(){}function Ru(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function N(){this.len=0,this.head=new Nt(sn,0,0),this.tail=this.head,this.states=null}var bo=function(){return Z.Buffer?function(){return(N.create=function(){return new on})()}:function(){return new N}};N.create=bo();N.alloc=function(e){return new Z.Array(e)};Z.Array!==Array&&(N.alloc=Z.pool(N.alloc,Z.Array.prototype.subarray));N.prototype._push=function(e,t,n){return this.tail=this.tail.next=new Nt(e,t,n),this.len+=t,this};function an(r,e,t){e[t]=r&255}function $u(r,e,t){for(;r>127;)e[t++]=r&127|128,r>>>=7;e[t]=r}function cn(r,e){this.len=r,this.next=void 0,this.val=e}cn.prototype=Object.create(Nt.prototype);cn.prototype.fn=$u;N.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new cn((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};N.prototype.int32=function(e){return e<0?this._push(un,10,sr.fromNumber(e)):this.uint32(e)};N.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function un(r,e,t){for(;r.hi;)e[t++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[t++]=r.lo&127|128,r.lo=r.lo>>>7;e[t++]=r.lo}N.prototype.uint64=function(e){var t=sr.from(e);return this._push(un,t.length(),t)};N.prototype.int64=N.prototype.uint64;N.prototype.sint64=function(e){var t=sr.from(e).zzEncode();return this._push(un,t.length(),t)};N.prototype.bool=function(e){return this._push(an,1,e?1:0)};function fn(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}N.prototype.fixed32=function(e){return this._push(fn,4,e>>>0)};N.prototype.sfixed32=N.prototype.fixed32;N.prototype.fixed64=function(e){var t=sr.from(e);return this._push(fn,4,t.lo)._push(fn,4,t.hi)};N.prototype.sfixed64=N.prototype.fixed64;N.prototype.float=function(e){return this._push(Z.float.writeFloatLE,4,e)};N.prototype.double=function(e){return this._push(Z.float.writeDoubleLE,8,e)};var Hu=Z.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};N.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(an,1,0);if(Z.isString(e)){var n=N.alloc(t=mo.length(e));mo.decode(e,n,0),e=n}return this.uint32(t)._push(Hu,t,e)};N.prototype.string=function(e){var t=wo.length(e);return t?this.uint32(t)._push(wo.write,t,e):this._push(an,1,0)};N.prototype.fork=function(){return this.states=new Ru(this),this.head=this.tail=new Nt(sn,0,0),this.len=0,this};N.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Nt(sn,0,0),this.len=0),this};N.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this};N.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t};N._configure=function(r){on=r,N.create=bo(),on._configure()}});var ko=E((pd,xo)=>{"use strict";xo.exports=le;var To=ln();(le.prototype=Object.create(To.prototype)).constructor=le;var Oe=Ce();function le(){To.call(this)}le._configure=function(){le.alloc=Oe._Buffer_allocUnsafe,le.writeBytesBuffer=Oe.Buffer&&Oe.Buffer.prototype instanceof Uint8Array&&Oe.Buffer.prototype.set.name==="set"?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]}};le.prototype.bytes=function(e){Oe.isString(e)&&(e=Oe._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(le.writeBytesBuffer,t,e),this};function Vu(r,e,t){r.length<40?Oe.utf8.write(r,e,t):e.utf8Write?e.utf8Write(r,t):e.write(r,t)}le.prototype.string=function(e){var t=Oe.Buffer.byteLength(e);return this.uint32(t),t&&this._push(Vu,t,e),this};le._configure()});var pn=E((yd,So)=>{"use strict";So.exports=L;var de=Ce(),dn,vo=de.LongBits,Gu=de.utf8;function re(r,e){return RangeError("index out of range: "+r.pos+" + "+(e||1)+" > "+r.len)}function L(r){this.buf=r,this.pos=0,this.len=r.length}var Eo=typeof Uint8Array!="undefined"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new L(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new L(e);throw Error("illegal buffer")},Bo=function(){return de.Buffer?function(t){return(L.create=function(i){return de.Buffer.isBuffer(i)?new dn(i):Eo(i)})(t)}:Eo};L.create=Bo();L.prototype._slice=de.Array.prototype.subarray||de.Array.prototype.slice;L.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,re(this,10);return e}}();L.prototype.int32=function(){return this.uint32()|0};L.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function hn(){var r=new vo(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw re(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,r}if(this.len-this.pos>4){for(;e<5;++e)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;e<5;++e){if(this.pos>=this.len)throw re(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}L.prototype.bool=function(){return this.uint32()!==0};function ar(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}L.prototype.fixed32=function(){if(this.pos+4>this.len)throw re(this,4);return ar(this.buf,this.pos+=4)};L.prototype.sfixed32=function(){if(this.pos+4>this.len)throw re(this,4);return ar(this.buf,this.pos+=4)|0};function Ao(){if(this.pos+8>this.len)throw re(this,8);return new vo(ar(this.buf,this.pos+=4),ar(this.buf,this.pos+=4))}L.prototype.float=function(){if(this.pos+4>this.len)throw re(this,4);var e=de.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};L.prototype.double=function(){if(this.pos+8>this.len)throw re(this,4);var e=de.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};L.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw re(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)};L.prototype.string=function(){var e=this.bytes();return Gu.read(e,0,e.length)};L.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw re(this,e);this.pos+=e}else do if(this.pos>=this.len)throw re(this);while(this.buf[this.pos++]&128);return this};L.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!=4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this};L._configure=function(r){dn=r,L.create=Bo(),dn._configure();var e=de.Long?"toLong":"toNumber";de.merge(L.prototype,{int64:function(){return hn.call(this)[e](!1)},uint64:function(){return hn.call(this)[e](!0)},sint64:function(){return hn.call(this).zzDecode()[e](!1)},fixed64:function(){return Ao.call(this)[e](!0)},sfixed64:function(){return Ao.call(this)[e](!1)}})}});var Po=E((gd,jo)=>{"use strict";jo.exports=He;var No=pn();(He.prototype=Object.create(No.prototype)).constructor=He;var Do=Ce();function He(r){No.call(this,r)}He._configure=function(){Do.Buffer&&(He.prototype._slice=Do.Buffer.prototype.slice)};He.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};He._configure()});var Oo=E((md,Co)=>{"use strict";Co.exports=Dt;var yn=Ce();(Dt.prototype=Object.create(yn.EventEmitter.prototype)).constructor=Dt;function Dt(r,e,t){if(typeof r!="function")throw TypeError("rpcImpl must be a function");yn.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(t)}Dt.prototype.rpcCall=function r(e,t,n,i,o){if(!i)throw TypeError("request must be specified");var s=this;if(!o)return yn.asPromise(r,s,e,t,n,i);if(!s.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return}try{return s.rpcImpl(e,t[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(a,f){if(a)return s.emit("error",a,e),o(a);if(f===null){s.end(!0);return}if(!(f instanceof n))try{f=n[s.responseDelimited?"decodeDelimited":"decode"](f)}catch(l){return s.emit("error",l,e),o(l)}return s.emit("data",f,e),o(null,f)})}catch(u){s.emit("error",u,e),setTimeout(function(){o(u)},0);return}};Dt.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var zo=E(Uo=>{"use strict";var Ju=Uo;Ju.Service=Oo()});var Io=E((bd,Lo)=>{"use strict";Lo.exports={}});var qo=E(Fo=>{"use strict";var H=Fo;H.build="minimal";H.Writer=ln();H.BufferWriter=ko();H.Reader=pn();H.BufferReader=Po();H.util=Ce();H.rpc=zo();H.roots=Io();H.configure=Mo;function Mo(){H.util._configure(),H.Writer._configure(H.BufferWriter),H.Reader._configure(H.BufferReader)}Mo()});var $o=E((Td,Ro)=>{"use strict";Ro.exports=qo()});var Zo=E((Sd,Ko)=>{"use strict";var ur=7;Ko.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,t){let n=this._internalPositionFor(e,!1);if(t===void 0)n!==-1&&(this._unsetInternalPos(n),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let i=!1;n===-1?(n=this._data.length,this._setBit(e),this._changedData=!0):i=!0,this._setInternalPos(n,e,t,i),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();let t=this._internalPositionFor(e,!0);if(t!==-1)return this._data[t][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){let e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let t=0;for(;t<this.length;)e(this.get(t),t,this),t++}map(e){let t=0,n=new Array(this.length);for(;t<this.length;)n[t]=e(this.get(t),t,this),t++;return n}reduce(e,t){let n=0,i=t;for(;n<this.length;){let o=this.get(n);i=e(i,o,n),n++}return i}find(e){let t=0,n,i;for(;t<this.length&&!n;)i=this.get(t),n=e(i),t++;return n?i:void 0}_internalPositionFor(e,t){let n=this._bytePosFor(e,t);if(n>=this._bitArrays.length)return-1;let i=this._bitArrays[n],o=e-n*ur;if(!((i&1<<o)>0))return-1;let u=this._bitArrays.slice(0,n).reduce(Xu,0),a=~(4294967295<<o+1),f=Xo(i&a);return u+f-1}_bytePosFor(e,t){let n=Math.floor(e/ur),i=n+1;for(;!t&&this._bitArrays.length<i;)this._bitArrays.push(0);return n}_setBit(e){let t=this._bytePosFor(e,!1);this._bitArrays[t]|=1<<e-t*ur}_unsetBit(e){let t=this._bytePosFor(e,!1);this._bitArrays[t]&=~(1<<e-t*ur)}_setInternalPos(e,t,n,i){let o=this._data,s=[t,n];if(i)this._sortData(),o[e]=s;else{if(o.length)if(o[o.length-1][0]>=t)o.push(s);else if(o[0][0]<=t)o.unshift(s);else{let u=Math.round(o.length/2);this._data=o.slice(0,u).concat(s).concat(o.slice(u))}else this._data.push(s);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(Ku),this._changedData=!1}bitField(){let e=[],t=8,n=0,i=0,o,s=this._bitArrays.slice();for(;s.length||n;){n===0&&(o=s.shift(),n=7);let a=Math.min(n,t),f=~(255<<a);i|=(o&f)<<8-t,o=o>>>a,n-=a,t-=a,(!t||!n&&!s.length)&&(e.push(i),i=0,t=8)}for(var u=e.length-1;u>0&&e[u]===0;u--)e.pop();return e}compactArray(){return this._sortData(),this._data.map(Zu)}};function Xu(r,e){return r+Xo(e)}function Xo(r){let e=r;return e=e-(e>>1&1431655765),e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}function Ku(r,e){return r[0]-e[0]}function Zu(r){return r[1]}});var wn={};F(wn,{identity:()=>Yu});var Yu,Yo=U(()=>{oe();ke();Yu=It({prefix:"\0",name:"identity",encode:r=>_r(r),decode:r=>br(r)})});var bn={};F(bn,{base2:()=>Qu});var Qu,Qo=U(()=>{oe();Qu=z({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var _n={};F(_n,{base8:()=>ef});var ef,es=U(()=>{oe();ef=z({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var Tn={};F(Tn,{base10:()=>tf});var tf,ts=U(()=>{oe();tf=ve({prefix:"9",name:"base10",alphabet:"0123456789"})});var xn={};F(xn,{base16:()=>rf,base16upper:()=>nf});var rf,nf,rs=U(()=>{oe();rf=z({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),nf=z({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var kn={};F(kn,{base36:()=>of,base36upper:()=>sf});var of,sf,ns=U(()=>{oe();of=ve({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),sf=ve({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var vn={};F(vn,{base64:()=>af,base64pad:()=>cf,base64url:()=>uf,base64urlpad:()=>ff});var af,cf,uf,ff,is=U(()=>{oe();af=z({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),cf=z({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),uf=z({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ff=z({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var ft,os,fr=U(()=>{Xe();ft=({name:r,code:e,encode:t})=>new os(r,e,t),os=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?Ue(this.code,t):t.then(n=>Ue(this.code,n))}else throw Error("Unknown type, must be binary type")}}});var En={};F(En,{sha256:()=>lf,sha512:()=>df});var as,lf,df,cs=U(()=>{fr();as=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),lf=ft({name:"sha2-256",code:18,encode:as("SHA-256")}),df=ft({name:"sha2-512",code:19,encode:as("SHA-512")})});var Md,Fd,us=U(()=>{Md=new TextEncoder,Fd=new TextDecoder});var Bn=U(()=>{ze();zt();ke();fr();Xe()});var An,Hd,fs=U(()=>{Yo();Qo();es();ts();rs();vr();ns();xr();is();cs();tn();nr();us();Bn();An={...wn,...bn,..._n,...Tn,...xn,...kr,...kn,...Tr,...vn},Hd={...En,...en}});function ls(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var ds,Sn,pf,hs,ps=U(()=>{fs();ds=ls("utf8","u",r=>{let e=new TextDecoder("utf8");return"u"+e.decode(r)},r=>new TextEncoder().encode(r.substring(1))),Sn=ls("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=new Uint8Array(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),pf={utf8:ds,"utf-8":ds,hex:An.base16,latin1:Sn,ascii:Sn,binary:Sn,...An},hs=pf});var ys={};F(ys,{fromString:()=>yf});function yf(r,e="utf8"){let t=hs[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return t.decoder.decode(`${t.prefix}${r}`)}var gs=U(()=>{ps()});var bs=E((Xd,ws)=>{"use strict";var gf=Zo(),{fromString:mf}=(gs(),ys),ne=class{constructor(e,t,n=0){this._options=e,this._popCount=0,this._parent=t,this._posAtParent=n,this._children=new gf,this.key=null}async put(e,t){let n=await this._findNewBucketAndPos(e);await n.bucket._putAt(n,e,t)}async get(e){let t=await this._findChild(e);if(t)return t.value}async del(e){let t=await this._findPlace(e),n=t.bucket._at(t.pos);n&&n.key===e&&t.bucket._delAt(t.pos)}leafCount(){return this._children.compactArray().reduce((t,n)=>n instanceof ne?t+n.leafCount():t+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){let e=this._children.compactArray();for(let t of e)t instanceof ne?yield*t.eachLeafSeries():yield t;return[]}serialize(e,t){let n=[];return t(this._children.reduce((i,o,s)=>(o&&(o instanceof ne?i.push(o.serialize(e,t)):i.push(e(o,s))),i),n))}asyncTransform(e,t){return ms(this,e,t)}toJSON(){return this.serialize(bf,_f)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){let t=await this._findPlace(e),n=t.bucket._at(t.pos);if(!(n instanceof ne)&&n&&n.key===e)return n}async _findPlace(e){let t=this._options.hash(typeof e=="string"?mf(e):e),n=await t.take(this._options.bits),i=this._children.get(n);return i instanceof ne?i._findPlace(t):{bucket:this,pos:n,hash:t,existingChild:i}}async _findNewBucketAndPos(e){let t=await this._findPlace(e);if(t.existingChild&&t.existingChild.key!==e){let n=new ne(this._options,t.bucket,t.pos);t.bucket._putObjectAt(t.pos,n);let i=await n._findPlace(t.existingChild.hash);return i.bucket._putAt(i,t.existingChild.key,t.existingChild.value),n._findNewBucketAndPos(t.hash)}return t}_putAt(e,t,n){this._putObjectAt(e.pos,{key:t,value:n,hash:e.hash})}_putObjectAt(e,t){this._children.get(e)||this._popCount++,this._children.set(e,t)}_delAt(e){if(e===-1)throw new Error("Invalid position");this._children.get(e)&&this._popCount--,this._children.unset(e),this._level()}_level(){if(this._parent&&this._popCount<=1)if(this._popCount===1){let e=this._children.find(wf);if(e&&!(e instanceof ne)){let t=e.hash;t.untake(this._options.bits);let n={pos:this._posAtParent,hash:t,bucket:this._parent};this._parent._putAt(n,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}};function wf(r){return Boolean(r)}function bf(r,e){return r.key}function _f(r){return r}async function ms(r,e,t){let n=[];for(let i of r._children.compactArray())if(i instanceof ne)await ms(i,e,t);else{let o=await e(i);n.push({bitField:r._children.bitField(),children:o})}return t(n)}ws.exports=ne});var Ts=E((Zd,_s)=>{"use strict";var Tf=[255,254,252,248,240,224,192,128],xf=[1,3,7,15,31,63,127,255];_s.exports=class{constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let t=e,n=0;for(;t&&this._haveBits();){let i=this._value[this._currentBytePos],o=this._currentBitPos+1,s=Math.min(o,t),u=kf(i,o-s,s);n=(n<<s)+u,t-=s,this._currentBitPos-=s,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function kf(r,e,t){let n=vf(e,t);return(r&n)>>>e}function vf(r,e){return Tf[r]&xf[Math.min(e+r-1,7)]}});var xs={};F(xs,{concat:()=>Ef});function Ef(r,e){e||(e=r.reduce((i,o)=>i+o.length,0));let t=new Uint8Array(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return t}var ks=U(()=>{});var vs=E((Yd,Nn)=>{"use strict";var Bf=Ts(),{concat:Af}=(ks(),xs);function Sf(r){function e(t){return t instanceof lr?t:new lr(t,r)}return e}var lr=class{constructor(e,t){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=t,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let t=e;for(;this._availableBits<t;)await this._produceMoreBits();let n=0;for(;t>0;){let i=this._buffers[this._currentBufferIndex],o=Math.min(i.availableBits(),t),s=i.take(o);n=(n<<o)+s,t-=o,this._availableBits-=o,i.availableBits()===0&&this._currentBufferIndex++}return n}untake(e){let t=e;for(;t>0;){let n=this._buffers[this._currentBufferIndex],i=Math.min(n.totalBits()-n.availableBits(),t);n.untake(i),t-=i,this._availableBits+=i,this._currentBufferIndex>0&&n.totalBits()===n.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;let e=this._depth?Af([this._value,Uint8Array.from([this._depth])]):this._value,t=await this._hashFn(e),n=new Bf(t);this._buffers.push(n),this._availableBits+=n.availableBits()}};Nn.exports=Sf;Nn.exports.InfiniteHash=lr});var As=E((Qd,Bs)=>{"use strict";var Es=bs(),Nf=vs();function Df(r){if(!r||!r.hashFn)throw new Error("please define an options.hashFn");let e={bits:r.bits||8,hash:Nf(r.hashFn)};return new Es(e)}Bs.exports={createHAMT:Df,Bucket:Es}});var Ss=E((jt,dr)=>{(function(r,e){"use strict";var t={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function n(c){if(!Array.isArray(c)&&!ArrayBuffer.isView(c))return!1;for(var d=0;d<c.length;d++)if(!Number.isInteger(c[d])||c[d]<0||c[d]>255)return!1;return!0}function i(c,d){return(c&65535)*d+(((c>>>16)*d&65535)<<16)}function o(c,d){return c<<d|c>>>32-d}function s(c){return c^=c>>>16,c=i(c,2246822507),c^=c>>>13,c=i(c,3266489909),c^=c>>>16,c}function u(c,d){c=[c[0]>>>16,c[0]&65535,c[1]>>>16,c[1]&65535],d=[d[0]>>>16,d[0]&65535,d[1]>>>16,d[1]&65535];var p=[0,0,0,0];return p[3]+=c[3]+d[3],p[2]+=p[3]>>>16,p[3]&=65535,p[2]+=c[2]+d[2],p[1]+=p[2]>>>16,p[2]&=65535,p[1]+=c[1]+d[1],p[0]+=p[1]>>>16,p[1]&=65535,p[0]+=c[0]+d[0],p[0]&=65535,[p[0]<<16|p[1],p[2]<<16|p[3]]}function a(c,d){c=[c[0]>>>16,c[0]&65535,c[1]>>>16,c[1]&65535],d=[d[0]>>>16,d[0]&65535,d[1]>>>16,d[1]&65535];var p=[0,0,0,0];return p[3]+=c[3]*d[3],p[2]+=p[3]>>>16,p[3]&=65535,p[2]+=c[2]*d[3],p[1]+=p[2]>>>16,p[2]&=65535,p[2]+=c[3]*d[2],p[1]+=p[2]>>>16,p[2]&=65535,p[1]+=c[1]*d[3],p[0]+=p[1]>>>16,p[1]&=65535,p[1]+=c[2]*d[2],p[0]+=p[1]>>>16,p[1]&=65535,p[1]+=c[3]*d[1],p[0]+=p[1]>>>16,p[1]&=65535,p[0]+=c[0]*d[3]+c[1]*d[2]+c[2]*d[1]+c[3]*d[0],p[0]&=65535,[p[0]<<16|p[1],p[2]<<16|p[3]]}function f(c,d){return d%=64,d===32?[c[1],c[0]]:d<32?[c[0]<<d|c[1]>>>32-d,c[1]<<d|c[0]>>>32-d]:(d-=32,[c[1]<<d|c[0]>>>32-d,c[0]<<d|c[1]>>>32-d])}function l(c,d){return d%=64,d===0?c:d<32?[c[0]<<d|c[1]>>>32-d,c[1]<<d]:[c[1]<<d-32,0]}function _(c,d){return[c[0]^d[0],c[1]^d[1]]}function B(c){return c=_(c,[0,c[0]>>>1]),c=a(c,[4283543511,3981806797]),c=_(c,[0,c[0]>>>1]),c=a(c,[3301882366,444984403]),c=_(c,[0,c[0]>>>1]),c}t.x86.hash32=function(c,d){if(t.inputValidation&&!n(c))return e;d=d||0;for(var p=c.length%4,V=c.length-p,y=d,g=0,w=3432918353,b=461845907,v=0;v<V;v=v+4)g=c[v]|c[v+1]<<8|c[v+2]<<16|c[v+3]<<24,g=i(g,w),g=o(g,15),g=i(g,b),y^=g,y=o(y,13),y=i(y,5)+3864292196;switch(g=0,p){case 3:g^=c[v+2]<<16;case 2:g^=c[v+1]<<8;case 1:g^=c[v],g=i(g,w),g=o(g,15),g=i(g,b),y^=g}return y^=c.length,y=s(y),y>>>0},t.x86.hash128=function(c,d){if(t.inputValidation&&!n(c))return e;d=d||0;for(var p=c.length%16,V=c.length-p,y=d,g=d,w=d,b=d,v=0,A=0,m=0,j=0,he=597399067,Pt=2869860233,Ct=951274213,Ot=2716044179,S=0;S<V;S=S+16)v=c[S]|c[S+1]<<8|c[S+2]<<16|c[S+3]<<24,A=c[S+4]|c[S+5]<<8|c[S+6]<<16|c[S+7]<<24,m=c[S+8]|c[S+9]<<8|c[S+10]<<16|c[S+11]<<24,j=c[S+12]|c[S+13]<<8|c[S+14]<<16|c[S+15]<<24,v=i(v,he),v=o(v,15),v=i(v,Pt),y^=v,y=o(y,19),y+=g,y=i(y,5)+1444728091,A=i(A,Pt),A=o(A,16),A=i(A,Ct),g^=A,g=o(g,17),g+=w,g=i(g,5)+197830471,m=i(m,Ct),m=o(m,17),m=i(m,Ot),w^=m,w=o(w,15),w+=b,w=i(w,5)+2530024501,j=i(j,Ot),j=o(j,18),j=i(j,he),b^=j,b=o(b,13),b+=y,b=i(b,5)+850148119;switch(v=0,A=0,m=0,j=0,p){case 15:j^=c[S+14]<<16;case 14:j^=c[S+13]<<8;case 13:j^=c[S+12],j=i(j,Ot),j=o(j,18),j=i(j,he),b^=j;case 12:m^=c[S+11]<<24;case 11:m^=c[S+10]<<16;case 10:m^=c[S+9]<<8;case 9:m^=c[S+8],m=i(m,Ct),m=o(m,17),m=i(m,Ot),w^=m;case 8:A^=c[S+7]<<24;case 7:A^=c[S+6]<<16;case 6:A^=c[S+5]<<8;case 5:A^=c[S+4],A=i(A,Pt),A=o(A,16),A=i(A,Ct),g^=A;case 4:v^=c[S+3]<<24;case 3:v^=c[S+2]<<16;case 2:v^=c[S+1]<<8;case 1:v^=c[S],v=i(v,he),v=o(v,15),v=i(v,Pt),y^=v}return y^=c.length,g^=c.length,w^=c.length,b^=c.length,y+=g,y+=w,y+=b,g+=y,w+=y,b+=y,y=s(y),g=s(g),w=s(w),b=s(b),y+=g,y+=w,y+=b,g+=y,w+=y,b+=y,("00000000"+(y>>>0).toString(16)).slice(-8)+("00000000"+(g>>>0).toString(16)).slice(-8)+("00000000"+(w>>>0).toString(16)).slice(-8)+("00000000"+(b>>>0).toString(16)).slice(-8)},t.x64.hash128=function(c,d){if(t.inputValidation&&!n(c))return e;d=d||0;for(var p=c.length%16,V=c.length-p,y=[0,d],g=[0,d],w=[0,0],b=[0,0],v=[2277735313,289559509],A=[1291169091,658871167],m=0;m<V;m=m+16)w=[c[m+4]|c[m+5]<<8|c[m+6]<<16|c[m+7]<<24,c[m]|c[m+1]<<8|c[m+2]<<16|c[m+3]<<24],b=[c[m+12]|c[m+13]<<8|c[m+14]<<16|c[m+15]<<24,c[m+8]|c[m+9]<<8|c[m+10]<<16|c[m+11]<<24],w=a(w,v),w=f(w,31),w=a(w,A),y=_(y,w),y=f(y,27),y=u(y,g),y=u(a(y,[0,5]),[0,1390208809]),b=a(b,A),b=f(b,33),b=a(b,v),g=_(g,b),g=f(g,31),g=u(g,y),g=u(a(g,[0,5]),[0,944331445]);switch(w=[0,0],b=[0,0],p){case 15:b=_(b,l([0,c[m+14]],48));case 14:b=_(b,l([0,c[m+13]],40));case 13:b=_(b,l([0,c[m+12]],32));case 12:b=_(b,l([0,c[m+11]],24));case 11:b=_(b,l([0,c[m+10]],16));case 10:b=_(b,l([0,c[m+9]],8));case 9:b=_(b,[0,c[m+8]]),b=a(b,A),b=f(b,33),b=a(b,v),g=_(g,b);case 8:w=_(w,l([0,c[m+7]],56));case 7:w=_(w,l([0,c[m+6]],48));case 6:w=_(w,l([0,c[m+5]],40));case 5:w=_(w,l([0,c[m+4]],32));case 4:w=_(w,l([0,c[m+3]],24));case 3:w=_(w,l([0,c[m+2]],16));case 2:w=_(w,l([0,c[m+1]],8));case 1:w=_(w,[0,c[m]]),w=a(w,v),w=f(w,31),w=a(w,A),y=_(y,w)}return y=_(y,[0,c.length]),g=_(g,[0,c.length]),y=u(y,g),g=u(g,y),y=B(y),g=B(g),y=u(y,g),g=u(g,y),("00000000"+(y[0]>>>0).toString(16)).slice(-8)+("00000000"+(y[1]>>>0).toString(16)).slice(-8)+("00000000"+(g[0]>>>0).toString(16)).slice(-8)+("00000000"+(g[1]>>>0).toString(16)).slice(-8)},typeof jt!="undefined"?(typeof dr!="undefined"&&dr.exports&&(jt=dr.exports=t),jt.murmurHash3=t):typeof define=="function"&&define.amd?define([],function(){return t}):(t._murmurHash3=r.murmurHash3,t.noConflict=function(){return r.murmurHash3=t._murmurHash3,t._murmurHash3=e,t.noConflict=e,t},r.murmurHash3=t)})(jt)});var Ds=E((eh,Ns)=>{Ns.exports=Ss()});var Ks=E((Gh,Xs)=>{"use strict";var Xf=async r=>{let e;for await(let t of r)e=t;return e};Xs.exports=Xf});var Qf={};F(Qf,{exporter:()=>Qs,recursive:()=>Yf,walkPath:()=>Ys});var gr=q(pe());ze();var Gs=q(pe());ze();var Xa=new TextDecoder;function Er(r,e){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=r.length)throw new Error("protobuf: unexpected end of data");let i=r[e++];if(t+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[t,e]}function qt(r,e){let t;[t,e]=Er(r,e);let n=e+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>r.length)throw new Error("protobuf: unexpected end of data");return[r.subarray(e,n),n]}function Qn(r,e){let t;return[t,e]=Er(r,e),[t&7,t>>3,e]}function Ka(r){let e={},t=r.length,n=0;for(;n<t;){let i,o;if([i,o,n]=Qn(r,n),o===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=qt(r,n)}else if(o===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let s;[s,n]=qt(r,n),e.Name=Xa.decode(s)}else if(o===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=Er(r,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function ei(r){let e=r.length,t=0,n,i=!1,o;for(;t<e;){let u,a;if([u,a,t]=Qn(r,t),u!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${u}`);if(a===1){if(o)throw new Error("protobuf: (PBNode) duplicate Data section");[o,t]=qt(r,t),n&&(i=!0)}else if(a===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let f;[f,t]=qt(r,t),n.push(Ka(f))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${a}`)}if(t>e)throw new Error("protobuf: (PBNode) unexpected end of data");let s={};return o&&(s.Data=o),s.Links=n||[],s}var bl=new TextEncoder,_l=2**32,Tl=2**31;ze();var vl=new TextEncoder;var Rt=112;function Ee(r){let e=ei(r),t={};return e.Data&&(t.Data=e.Data),e.Links&&(t.Links=e.Links.map(n=>{let i={};try{i.Hash=P.decode(n.Hash)}catch(o){}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(i.Name=n.Name),n.Tsize!==void 0&&(i.Tsize=n.Tsize),i})),t}var At=q(Mi());ze();var Cu=42;function Ou(r){if(r[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return P.decode(r.subarray(1))}var Fi={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Fi.tags[Cu]=Ou;var er=113;var tr=r=>At.decode(r,Fi);nr();tn();var yr=q(pe());var cr=q(Vi());var Te=q($o()),ut=Te.default.Reader,gn=Te.default.Writer,k=Te.default.util,M=Te.default.roots["ipfs-unixfs"]||(Te.default.roots["ipfs-unixfs"]={}),Ho=M.Data=(()=>{function r(e){if(this.blocksizes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.Type=0,r.prototype.Data=k.newBuffer([]),r.prototype.filesize=k.Long?k.Long.fromBits(0,0,!0):0,r.prototype.blocksizes=k.emptyArray,r.prototype.hashType=k.Long?k.Long.fromBits(0,0,!0):0,r.prototype.fanout=k.Long?k.Long.fromBits(0,0,!0):0,r.prototype.mode=0,r.prototype.mtime=null,r.encode=function(t,n){if(n||(n=gn.create()),n.uint32(8).int32(t.Type),t.Data!=null&&Object.hasOwnProperty.call(t,"Data")&&n.uint32(18).bytes(t.Data),t.filesize!=null&&Object.hasOwnProperty.call(t,"filesize")&&n.uint32(24).uint64(t.filesize),t.blocksizes!=null&&t.blocksizes.length)for(var i=0;i<t.blocksizes.length;++i)n.uint32(32).uint64(t.blocksizes[i]);return t.hashType!=null&&Object.hasOwnProperty.call(t,"hashType")&&n.uint32(40).uint64(t.hashType),t.fanout!=null&&Object.hasOwnProperty.call(t,"fanout")&&n.uint32(48).uint64(t.fanout),t.mode!=null&&Object.hasOwnProperty.call(t,"mode")&&n.uint32(56).uint32(t.mode),t.mtime!=null&&Object.hasOwnProperty.call(t,"mtime")&&M.UnixTime.encode(t.mtime,n.uint32(66).fork()).ldelim(),n},r.decode=function(t,n){t instanceof ut||(t=ut.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new M.Data;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.Type=t.int32();break;case 2:o.Data=t.bytes();break;case 3:o.filesize=t.uint64();break;case 4:if(o.blocksizes&&o.blocksizes.length||(o.blocksizes=[]),(s&7)==2)for(var u=t.uint32()+t.pos;t.pos<u;)o.blocksizes.push(t.uint64());else o.blocksizes.push(t.uint64());break;case 5:o.hashType=t.uint64();break;case 6:o.fanout=t.uint64();break;case 7:o.mode=t.uint32();break;case 8:o.mtime=M.UnixTime.decode(t,t.uint32());break;default:t.skipType(s&7);break}}if(!o.hasOwnProperty("Type"))throw k.ProtocolError("missing required 'Type'",{instance:o});return o},r.fromObject=function(t){if(t instanceof M.Data)return t;var n=new M.Data;switch(t.Type){case"Raw":case 0:n.Type=0;break;case"Directory":case 1:n.Type=1;break;case"File":case 2:n.Type=2;break;case"Metadata":case 3:n.Type=3;break;case"Symlink":case 4:n.Type=4;break;case"HAMTShard":case 5:n.Type=5;break}if(t.Data!=null&&(typeof t.Data=="string"?k.base64.decode(t.Data,n.Data=k.newBuffer(k.base64.length(t.Data)),0):t.Data.length&&(n.Data=t.Data)),t.filesize!=null&&(k.Long?(n.filesize=k.Long.fromValue(t.filesize)).unsigned=!0:typeof t.filesize=="string"?n.filesize=parseInt(t.filesize,10):typeof t.filesize=="number"?n.filesize=t.filesize:typeof t.filesize=="object"&&(n.filesize=new k.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0))),t.blocksizes){if(!Array.isArray(t.blocksizes))throw TypeError(".Data.blocksizes: array expected");n.blocksizes=[];for(var i=0;i<t.blocksizes.length;++i)k.Long?(n.blocksizes[i]=k.Long.fromValue(t.blocksizes[i])).unsigned=!0:typeof t.blocksizes[i]=="string"?n.blocksizes[i]=parseInt(t.blocksizes[i],10):typeof t.blocksizes[i]=="number"?n.blocksizes[i]=t.blocksizes[i]:typeof t.blocksizes[i]=="object"&&(n.blocksizes[i]=new k.LongBits(t.blocksizes[i].low>>>0,t.blocksizes[i].high>>>0).toNumber(!0))}if(t.hashType!=null&&(k.Long?(n.hashType=k.Long.fromValue(t.hashType)).unsigned=!0:typeof t.hashType=="string"?n.hashType=parseInt(t.hashType,10):typeof t.hashType=="number"?n.hashType=t.hashType:typeof t.hashType=="object"&&(n.hashType=new k.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0))),t.fanout!=null&&(k.Long?(n.fanout=k.Long.fromValue(t.fanout)).unsigned=!0:typeof t.fanout=="string"?n.fanout=parseInt(t.fanout,10):typeof t.fanout=="number"?n.fanout=t.fanout:typeof t.fanout=="object"&&(n.fanout=new k.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0))),t.mode!=null&&(n.mode=t.mode>>>0),t.mtime!=null){if(typeof t.mtime!="object")throw TypeError(".Data.mtime: object expected");n.mtime=M.UnixTime.fromObject(t.mtime)}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.blocksizes=[]),n.defaults){if(i.Type=n.enums===String?"Raw":0,n.bytes===String?i.Data="":(i.Data=[],n.bytes!==Array&&(i.Data=k.newBuffer(i.Data))),k.Long){var o=new k.Long(0,0,!0);i.filesize=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else i.filesize=n.longs===String?"0":0;if(k.Long){var o=new k.Long(0,0,!0);i.hashType=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else i.hashType=n.longs===String?"0":0;if(k.Long){var o=new k.Long(0,0,!0);i.fanout=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else i.fanout=n.longs===String?"0":0;i.mode=0,i.mtime=null}if(t.Type!=null&&t.hasOwnProperty("Type")&&(i.Type=n.enums===String?M.Data.DataType[t.Type]:t.Type),t.Data!=null&&t.hasOwnProperty("Data")&&(i.Data=n.bytes===String?k.base64.encode(t.Data,0,t.Data.length):n.bytes===Array?Array.prototype.slice.call(t.Data):t.Data),t.filesize!=null&&t.hasOwnProperty("filesize")&&(typeof t.filesize=="number"?i.filesize=n.longs===String?String(t.filesize):t.filesize:i.filesize=n.longs===String?k.Long.prototype.toString.call(t.filesize):n.longs===Number?new k.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0):t.filesize),t.blocksizes&&t.blocksizes.length){i.blocksizes=[];for(var s=0;s<t.blocksizes.length;++s)typeof t.blocksizes[s]=="number"?i.blocksizes[s]=n.longs===String?String(t.blocksizes[s]):t.blocksizes[s]:i.blocksizes[s]=n.longs===String?k.Long.prototype.toString.call(t.blocksizes[s]):n.longs===Number?new k.LongBits(t.blocksizes[s].low>>>0,t.blocksizes[s].high>>>0).toNumber(!0):t.blocksizes[s]}return t.hashType!=null&&t.hasOwnProperty("hashType")&&(typeof t.hashType=="number"?i.hashType=n.longs===String?String(t.hashType):t.hashType:i.hashType=n.longs===String?k.Long.prototype.toString.call(t.hashType):n.longs===Number?new k.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0):t.hashType),t.fanout!=null&&t.hasOwnProperty("fanout")&&(typeof t.fanout=="number"?i.fanout=n.longs===String?String(t.fanout):t.fanout:i.fanout=n.longs===String?k.Long.prototype.toString.call(t.fanout):n.longs===Number?new k.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0):t.fanout),t.mode!=null&&t.hasOwnProperty("mode")&&(i.mode=t.mode),t.mtime!=null&&t.hasOwnProperty("mtime")&&(i.mtime=M.UnixTime.toObject(t.mtime,n)),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,Te.default.util.toJSONOptions)},r.DataType=function(){let e={},t=Object.create(e);return t[e[0]="Raw"]=0,t[e[1]="Directory"]=1,t[e[2]="File"]=2,t[e[3]="Metadata"]=3,t[e[4]="Symlink"]=4,t[e[5]="HAMTShard"]=5,t}(),r})(),xd=M.UnixTime=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.Seconds=k.Long?k.Long.fromBits(0,0,!1):0,r.prototype.FractionalNanoseconds=0,r.encode=function(t,n){return n||(n=gn.create()),n.uint32(8).int64(t.Seconds),t.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(t,"FractionalNanoseconds")&&n.uint32(21).fixed32(t.FractionalNanoseconds),n},r.decode=function(t,n){t instanceof ut||(t=ut.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new M.UnixTime;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.Seconds=t.int64();break;case 2:o.FractionalNanoseconds=t.fixed32();break;default:t.skipType(s&7);break}}if(!o.hasOwnProperty("Seconds"))throw k.ProtocolError("missing required 'Seconds'",{instance:o});return o},r.fromObject=function(t){if(t instanceof M.UnixTime)return t;var n=new M.UnixTime;return t.Seconds!=null&&(k.Long?(n.Seconds=k.Long.fromValue(t.Seconds)).unsigned=!1:typeof t.Seconds=="string"?n.Seconds=parseInt(t.Seconds,10):typeof t.Seconds=="number"?n.Seconds=t.Seconds:typeof t.Seconds=="object"&&(n.Seconds=new k.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber())),t.FractionalNanoseconds!=null&&(n.FractionalNanoseconds=t.FractionalNanoseconds>>>0),n},r.toObject=function(t,n){n||(n={});var i={};if(n.defaults){if(k.Long){var o=new k.Long(0,0,!1);i.Seconds=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else i.Seconds=n.longs===String?"0":0;i.FractionalNanoseconds=0}return t.Seconds!=null&&t.hasOwnProperty("Seconds")&&(typeof t.Seconds=="number"?i.Seconds=n.longs===String?String(t.Seconds):t.Seconds:i.Seconds=n.longs===String?k.Long.prototype.toString.call(t.Seconds):n.longs===Number?new k.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber():t.Seconds),t.FractionalNanoseconds!=null&&t.hasOwnProperty("FractionalNanoseconds")&&(i.FractionalNanoseconds=t.FractionalNanoseconds),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,Te.default.util.toJSONOptions)},r})(),kd=M.Metadata=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.MimeType="",r.encode=function(t,n){return n||(n=gn.create()),t.MimeType!=null&&Object.hasOwnProperty.call(t,"MimeType")&&n.uint32(10).string(t.MimeType),n},r.decode=function(t,n){t instanceof ut||(t=ut.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new M.Metadata;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.MimeType=t.string();break;default:t.skipType(s&7);break}}return o},r.fromObject=function(t){if(t instanceof M.Metadata)return t;var n=new M.Metadata;return t.MimeType!=null&&(n.MimeType=String(t.MimeType)),n},r.toObject=function(t,n){n||(n={});var i={};return n.defaults&&(i.MimeType=""),t.MimeType!=null&&t.hasOwnProperty("MimeType")&&(i.MimeType=t.MimeType),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,Te.default.util.toJSONOptions)},r})();var xe=Ho,Vo=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],Wu=["directory","hamt-sharded-directory"],Go=parseInt("0644",8),Jo=parseInt("0755",8);function mn(r){if(r!=null)return typeof r=="number"?r&4095:(r=r.toString(),r.substring(0,1)==="0"?parseInt(r,8)&4095:parseInt(r,10)&4095)}function Wo(r){if(r==null)return;let e;if(r.secs!=null&&(e={secs:r.secs,nsecs:r.nsecs}),r.Seconds!=null&&(e={secs:r.Seconds,nsecs:r.FractionalNanoseconds}),Array.isArray(r)&&(e={secs:r[0],nsecs:r[1]}),r instanceof Date){let t=r.getTime(),n=Math.floor(t/1e3);e={secs:n,nsecs:(t-n*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(e,"secs")){if(e!=null&&e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw(0,cr.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}var Ve=class{static unmarshal(e){let t=xe.decode(e),n=xe.toObject(t,{defaults:!1,arrays:!0,longs:Number,objects:!1}),i=new Ve({type:Vo[n.Type],data:n.Data,blockSizes:n.blocksizes,mode:n.mode,mtime:n.mtime?{secs:n.mtime.Seconds,nsecs:n.mtime.FractionalNanoseconds}:void 0});return i._originalMode=n.mode||0,i}constructor(e={type:"file"}){let{type:t,data:n,blockSizes:i,hashType:o,fanout:s,mtime:u,mode:a}=e;if(t&&!Vo.includes(t))throw(0,cr.default)(new Error("Type: "+t+" is not valid"),"ERR_INVALID_TYPE");this.type=t||"file",this.data=n,this.hashType=o,this.fanout=s,this.blockSizes=i||[],this._originalMode=0,this.mode=mn(a),u&&(this.mtime=Wo(u),this.mtime&&!this.mtime.nsecs&&(this.mtime.nsecs=0))}set mode(e){this._mode=this.isDirectory()?Jo:Go;let t=mn(e);t!==void 0&&(this._mode=t)}get mode(){return this._mode}isDirectory(){return Boolean(this.type&&Wu.includes(this.type))}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0;let e=0;return this.blockSizes.forEach(t=>{e+=t}),this.data&&(e+=this.data.length),e}marshal(){let e;switch(this.type){case"raw":e=xe.DataType.Raw;break;case"directory":e=xe.DataType.Directory;break;case"file":e=xe.DataType.File;break;case"metadata":e=xe.DataType.Metadata;break;case"symlink":e=xe.DataType.Symlink;break;case"hamt-sharded-directory":e=xe.DataType.HAMTShard;break;default:throw(0,cr.default)(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE")}let t=this.data;(!this.data||!this.data.length)&&(t=void 0);let n;this.mode!=null&&(n=this._originalMode&4294963200|(mn(this.mode)||0),n===Go&&!this.isDirectory()&&(n=void 0),n===Jo&&this.isDirectory()&&(n=void 0));let i;if(this.mtime!=null){let s=Wo(this.mtime);s&&(i={Seconds:s.secs,FractionalNanoseconds:s.nsecs},i.FractionalNanoseconds===0&&delete i.FractionalNanoseconds)}let o={Type:e,Data:t,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:n,mtime:i};return xe.encode(o).finish()}};var hr=q(As());fr();Bn();var Dn=q(Ds());function jf(r){let e=new Array(4);for(let t=0;t<4;t++)e[t]=r&255,r=r>>8;return new Uint8Array(e)}var nh=ft({name:"murmur3-32",code:35,encode:r=>jf(Dn.default.x86.hash32(r))}),js=ft({name:"murmur3-128",code:34,encode:r=>pt.fromHex(Dn.default.x64.hash128(r))});var Pf=async function(r){return(await js.encode(r)).slice(0,8).reverse()},Cf=(r,e,t)=>Promise.all(r.map(n=>{if(n.Name==null)throw new Error("Unexpected Link without a Name");if(n.Name.length===2){let i=parseInt(n.Name,16);return e._putObjectAt(i,new hr.Bucket({hash:t._options.hash,bits:t._options.bits},e,i))}return t.put(n.Name.substring(2),!0)})),Ps=r=>r.toString(16).toUpperCase().padStart(2,"0").substring(0,2),Of=r=>{let e=r.bucket,t=[];for(;e._parent;)t.push(e),e=e._parent;return t.push(e),t.reverse()},Cs=async(r,e,t,n,i)=>{if(!n){let l=(0,hr.createHAMT)({hashFn:Pf});n={rootBucket:l,hamtDepth:1,lastBucket:l}}await Cf(r.Links,n.lastBucket,n.rootBucket);let o=await n.rootBucket._findNewBucketAndPos(e),s=Ps(o.pos),u=Of(o);u.length>n.hamtDepth&&(n.lastBucket=u[n.hamtDepth],s=Ps(n.lastBucket._posAtParent));let a=r.Links.find(l=>{if(l.Name==null)return!1;let _=l.Name.substring(0,2),B=l.Name.substring(2);return!(_!==s||B&&B!==e)});if(!a)return null;if(a.Name!=null&&a.Name.substring(2)===e)return a.Hash;n.hamtDepth++;let f=await t.get(a.Hash,i);return r=Ee(f),Cs(r,e,t,n,i)},Os=Cs;function Uf(r,e,t,n){let i=r.length,o=e+i;return t>=o||n<e?new Uint8Array(0):(n>=e&&n<o&&(r=r.slice(0,n-e)),t>=e&&t<o&&(r=r.slice(t-e)),r)}var Ge=Uf;var pr=q(pe()),zf=(r,e,t)=>{if(e||(e=0),e<0)throw(0,pr.default)(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(e>r)throw(0,pr.default)(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(!t&&t!==0&&(t=r-e),t<0)throw(0,pr.default)(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");return e+t>r&&(t=r-e),{offset:e,length:t}},lt=zf;var jn=q(pe());nr();async function*Us(r,e,t,n,i=0,o){if(e instanceof Uint8Array){let a=Ge(e,i,t,n);return a.length&&(yield a),i+=a.length,i}if(e.Data==null)throw(0,jn.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let s;try{s=Ve.unmarshal(e.Data)}catch(a){throw(0,jn.default)(a,"ERR_NOT_UNIXFS")}if(s.data&&s.data.length){let a=Ge(s.data,i,t,n);a.length&&(yield a),i+=s.data.length}let u=i;for(let a=0;a<e.Links.length;a++){let f=e.Links[a],l=i+s.blockSizes[a];if(t>=u&&t<l||n>u&&n<=l||t<u&&n>l){let _=await r.get(f.Hash,{signal:o.signal}),B;switch(f.Hash.code){case Rt:B=await Ee(_);break;case rr:B=_;break;case er:B=await tr(_);break;default:throw Error(`Unsupported codec: ${f.Hash.code}`)}for await(let c of Us(r,B,t,n,i,o))i+=c.length,yield c}i=l,u=l+1}}var Lf=(r,e,t,n,i,o,s)=>{function u(a={}){let f=t.fileSize();if(f===void 0)throw new Error("File was a directory");let{offset:l,length:_}=lt(f,a.offset,a.length),B=l,c=l+_;return Us(s,e,B,c,0,a)}return u},Pn=Lf;var If=(r,e,t,n,i,o,s)=>{async function*u(a={}){let f=a.offset||0,l=a.length||e.Links.length,_=e.Links.slice(f,l);for(let B of _){let c=await i(B.Hash,B.Name||"",`${n}/${B.Name||""}`,[],o+1,s,a);c.entry&&(yield c.entry)}}return u},zs=If;var Mf=(r,e,t,n,i,o,s)=>{function u(a={}){return Ls(e,n,i,o,s,a)}return u};async function*Ls(r,e,t,n,i,o){let s=r.Links;for(let u of s){let a=u.Name!=null?u.Name.substring(2):null;if(a)yield(await t(u.Hash,a,`${e}/${a}`,[],n+1,i,o)).entry;else{let f=await i.get(u.Hash);r=Ee(f);for await(let l of Ls(r,e,t,n,i,o))yield l}}}var Is=Mf;var Ff=(r,e)=>{let t=r.Links.find(n=>n.Name===e);return t&&t.Hash},qf={raw:Pn,file:Pn,directory:zs,"hamt-sharded-directory":Is,metadata:(r,e,t,n,i,o,s)=>()=>[],symlink:(r,e,t,n,i,o,s)=>()=>[]},Rf=async(r,e,t,n,i,o,s,u)=>{let a=await s.get(r,u),f=Ee(a),l,_;if(e||(e=r.toString()),f.Data==null)throw(0,yr.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{l=Ve.unmarshal(f.Data)}catch(B){throw(0,yr.default)(B,"ERR_NOT_UNIXFS")}if(t||(t=e),n.length){let B;if(l&&l.type==="hamt-sharded-directory"?B=await Os(f,n[0],s):B=Ff(f,n[0]),!B)throw(0,yr.default)(new Error("file does not exist"),"ERR_NOT_FOUND");let c=n.shift(),d=`${t}/${c}`;_={cid:B,toResolve:n,name:c||"",path:d}}return{entry:{type:l.isDirectory()?"directory":"file",name:e,path:t,cid:r,content:qf[l.type](r,f,l,t,i,o,s),unixfs:l,depth:o,node:f,size:l.fileSize()},next:_}},Ms=Rf;var Fs=q(pe());var $f=r=>{async function*e(t={}){let{offset:n,length:i}=lt(r.length,t.offset,t.length);yield Ge(r,0,n,n+i)}return e},Hf=async(r,e,t,n,i,o,s,u)=>{if(n.length)throw(0,Fs.default)(new Error(`No link named ${t} found in raw node ${r}`),"ERR_NOT_FOUND");let a=await s.get(r,u);return{entry:{type:"raw",name:e,path:t,cid:r,content:$f(a),depth:o,size:a.length,node:a}}},qs=Hf;ze();var Rs=q(pe());var Vf=async(r,e,t,n,i,o,s,u)=>{let a=await s.get(r),f=tr(a),l=f,_=t;for(;n.length;){let B=n[0];if(B in l){n.shift(),_=`${_}/${B}`;let c=P.asCID(l[B]);if(c)return{entry:{type:"object",name:e,path:t,cid:r,node:a,depth:o,size:a.length,content:async function*(){yield f}},next:{cid:c,name:B,path:_,toResolve:n}};l=l[B]}else throw(0,Rs.default)(new Error(`No property named ${B} found in cbor node ${r}`),"ERR_NO_PROP")}return{entry:{type:"object",name:e,path:t,cid:r,node:a,depth:o,size:a.length,content:async function*(){yield f}}}},$s=Vf;var Hs=q(pe());Xe();var Gf=r=>{async function*e(t={}){let{offset:n,length:i}=lt(r.length,t.offset,t.length);yield Ge(r,0,n,n+i)}return e},Jf=async(r,e,t,n,i,o,s,u)=>{if(n.length)throw(0,Hs.default)(new Error(`No link named ${t} found in raw node ${r}`),"ERR_NOT_FOUND");let a=await Lt(r.multihash.bytes);return{entry:{type:"identity",name:e,path:t,cid:r,content:Gf(a.digest),depth:o,size:a.digest.length,node:a.digest}}},Vs=Jf;var Wf={[Rt]:Ms,[rr]:qs,[er]:$s,[Qr.code]:Vs};function Js(r,e,t,n,i,o,s){let u=Wf[r.code];if(!u)throw(0,Gs.default)(new Error(`No resolver for code ${r.code}`),"ERR_NO_RESOLVER");return u(r,e,t,n,Js,i,o,s)}var Ws=Js;var Zs=q(Ks()),Kf=(r="")=>(r.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean),Zf=r=>{if(r instanceof Uint8Array)return{cid:P.decode(r),toResolve:[]};let e=P.asCID(r);if(e)return{cid:e,toResolve:[]};if(typeof r=="string"){r.indexOf("/ipfs/")===0&&(r=r.substring(6));let t=Kf(r);return{cid:P.parse(t[0]),toResolve:t.slice(1)}}throw(0,gr.default)(new Error(`Unknown path type ${r}`),"ERR_BAD_PATH")};async function*Ys(r,e,t={}){let{cid:n,toResolve:i}=Zf(r),o=n.toString(),s=o,u=i.length;for(;;){let a=await Ws(n,o,s,i,u,e,t);if(!a.entry&&!a.next)throw(0,gr.default)(new Error(`Could not resolve ${r}`),"ERR_NOT_FOUND");if(a.entry&&(yield a.entry),!a.next)return;i=a.next.toResolve,n=a.next.cid,o=a.next.name,s=a.next.path}}async function Qs(r,e,t={}){let n=await(0,Zs.default)(Ys(r,e,t));if(!n)throw(0,gr.default)(new Error(`Could not resolve ${r}`),"ERR_NOT_FOUND");return n}async function*Yf(r,e,t={}){let n=await Qs(r,e,t);if(!n)return;if(yield n,n.type==="directory")for await(let o of i(n,t))yield o;async function*i(o,s){for await(let u of o.content(s))yield u,!(u instanceof Uint8Array)&&u.type==="directory"&&(yield*i(u,s))}}return Qf;})();
return IpfsUnixfsExporter}));
